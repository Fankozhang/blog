<!DOCTYPE html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.53" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://github.com/Fankozhang/blog/posts/cherry.html"><meta property="og:title" content="vuePress and nginx and docker"><meta property="og:description" content="vuePress基本使用（部署github） (非自动化部署) github 创建仓库 blog 在 blog 下新建分支 gh-pages press1 切换分支到 gh-pages 本地新建 blog 文件夹 连接远程 github仓库 在blog文件夹下下载配置vuepress,并将源代码打包 在github的blog仓库下的settings里面..."><meta property="og:type" content="article"><meta property="og:updated_time" content="2023-05-12T20:14:06.000Z"><meta property="og:locale" content="en-US"><meta property="og:locale:alternate" content="zh-CN"><meta property="article:tag" content="red"><meta property="article:tag" content="small"><meta property="article:tag" content="round"><meta property="article:published_time" content="2022-01-09T00:00:00.000Z"><meta property="article:modified_time" content="2023-05-12T20:14:06.000Z"><link rel="alternate" hreflang="zh-cn" href="https://github.com/Fankozhang/blog/zh/posts/cherry.html"><link rel="icon" href="/blog/favicon.ico"><link rel="icon" href="/blog/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/blog/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/blog/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/blog/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="manifest" href="/blog/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/blog/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/blog/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>vuePress and nginx and docker</title><meta name="description" content="vuePress基本使用（部署github） (非自动化部署) github 创建仓库 blog 在 blog 下新建分支 gh-pages press1 切换分支到 gh-pages 本地新建 blog 文件夹 连接远程 github仓库 在blog文件夹下下载配置vuepress,并将源代码打包 在github的blog仓库下的settings里面...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/blog/assets/style.93125887.css" as="style" /><link rel="stylesheet" href="/blog/assets/style.93125887.css" />
    <link rel="modulepreload" href="/blog/assets/app.cf785be7.js"><link rel="modulepreload" href="/blog/assets/cherry.html.1e223d42.js"><link rel="modulepreload" href="/blog/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/blog/assets/cherry.html.f8e02066.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/blog/" class="brand"><img class="logo" src="/blog/logo.png" alt><!----><!----></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/blog/" class="nav-link active" aria-label="首页"><span class="icon iconfont icon-home"></span>首页<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="前端"><span class="title"><span class="icon iconfont icon-note"></span>前端</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>前端知识记录</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/posts/apple/1.html" class="nav-link" aria-label="html"><!---->html<!----></a></li><li class="dropdown-subitem"><a href="/blog/posts/apple/2.html" class="nav-link" aria-label="css"><!---->css<!----></a></li><li class="dropdown-subitem"><a href="/blog/posts/apple/3.html" class="nav-link" aria-label="javaScript"><!---->javaScript<!----></a></li><li class="dropdown-subitem"><a href="/blog/posts/apple/4.html" class="nav-link" aria-label="vue"><!---->vue<!----></a></li></ul></li><li class="dropdown-item"><a aria-current="page" href="/blog/posts/cherry.html" class="router-link-active router-link-exact-active nav-link active" aria-label="vuePress"><!---->vuePress<!----></a></li><li class="dropdown-item"><a href="/blog/posts/dragonfruit.html" class="nav-link" aria-label="uni-app"><!---->uni-app<!----></a></li><li class="dropdown-item"><a href="/blog/posts/tomato.html" class="nav-link" aria-label="react"><!---->react<!----></a></li><li class="dropdown-item"><a href="/blog/posts/strawberry.html" class="nav-link" aria-label="UI and Data"><!---->UI and Data<!----></a></li><li class="dropdown-item"><a href="/blog/posts/bigScreen.html" class="nav-link" aria-label="bigScreen"><!---->bigScreen<!----></a></li><li class="dropdown-item"><a href="/blog/posts/desk.html" class="nav-link" aria-label="知识拓展(electron,qiankun)"><!---->知识拓展(electron,qiankun)<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="后端"><span class="title"><span class="icon iconfont icon-note"></span>后端</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>后端语言</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/posts/banana/1.html" class="nav-link" aria-label="java"><!---->java<!----></a></li><li class="dropdown-subitem"><a href="/blog/posts/banana/2.html" class="nav-link" aria-label="node"><!---->node<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="收藏"><span class="title"><!---->收藏</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/blog/site/site1.html" class="nav-link" aria-label="网址收藏"><span class="icon iconfont icon-edit"></span>网址收藏<!----></a></li><li class="dropdown-item"><a href="/blog/site/method.html" class="nav-link" aria-label="工作中问题及解决"><span class="icon iconfont icon-edit"></span>工作中问题及解决<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://github.com/Fankozhang" rel="noopener noreferrer" target="_blank" aria-label="github" class="nav-link"><span class="icon iconfont icon-note"></span>github<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/blog/" class="nav-link sidebar-link sidebar-page" aria-label="首页"><span class="icon iconfont icon-home"></span>首页<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><p class="sidebar-heading active"><span class="icon iconfont icon-note"></span><span class="title">前端</span><!----></p><ul class="sidebar-links"><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">前端知识记录</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/blog/posts/apple/1.html" class="nav-link sidebar-link sidebar-page" aria-label="html"><!---->html<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/posts/apple/2.html" class="nav-link sidebar-link sidebar-page" aria-label="css"><!---->css<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/posts/apple/3.html" class="nav-link sidebar-link sidebar-page" aria-label="javaScript"><!---->javaScript<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/posts/apple/4.html" class="nav-link sidebar-link sidebar-page" aria-label="vue"><!---->vue<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><!--[--><a aria-current="page" href="/blog/posts/cherry.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="vuePress"><!---->vuePress<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#vuepress基本使用-部署github" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="vuePress基本使用（部署github）"><!---->vuePress基本使用（部署github）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#非自动化部署" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="(非自动化部署)"><!---->(非自动化部署)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#自动化部署" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="（自动化部署）"><!---->（自动化部署）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#vuepress主题" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="vuepress主题"><!---->vuepress主题<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#nginx" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="nginx"><!---->nginx<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#安装虚拟机-linux-nginx" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="安装虚拟机，linux, nginx"><!---->安装虚拟机，linux, nginx<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#基本命令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="基本命令"><!---->基本命令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#增加server-开放端口" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="增加server（开放端口）"><!---->增加server（开放端口）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#nginx日志切割" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="nginx日志切割"><!---->nginx日志切割<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#配置静态资源文件服务器-存放静态文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="配置静态资源文件服务器 （存放静态文件）"><!---->配置静态资源文件服务器 （存放静态文件）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#开启gzip压缩" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="开启gzip压缩"><!---->开启gzip压缩<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#路径匹配" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="路径匹配"><!---->路径匹配<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#nginx跨域配置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="nginx跨域配置"><!---->nginx跨域配置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#配置防盗链" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="配置防盗链"><!---->配置防盗链<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#nginx-搭建-集群" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="nginx 搭建 集群"><!---->nginx 搭建 集群<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#nginx中的upstream指令参数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="nginx中的upstream指令参数"><!---->nginx中的upstream指令参数<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#nginx控制浏览器缓存" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="nginx控制浏览器缓存"><!---->nginx控制浏览器缓存<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#nginx-反向代理缓存" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="nginx  反向代理缓存"><!---->nginx  反向代理缓存<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#nginx搭建高可用集群" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="nginx搭建高可用集群"><!---->nginx搭建高可用集群<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#使用nginx出现的问题" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="使用nginx出现的问题："><!---->使用nginx出现的问题：<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#docker" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="docker"><!---->docker<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/posts/cherry.html#操作过程中遇到问题" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="操作过程中遇到问题 ："><!---->操作过程中遇到问题 ：<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/blog/posts/dragonfruit.html" class="nav-link sidebar-link sidebar-page" aria-label="uni-app"><!---->uni-app<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/posts/tomato.html" class="nav-link sidebar-link sidebar-page" aria-label="react"><!---->react<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/posts/strawberry.html" class="nav-link sidebar-link sidebar-page" aria-label="UI and Data"><!---->UI and Data<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/posts/bigScreen.html" class="nav-link sidebar-link sidebar-page" aria-label="bigScreen"><!---->bigScreen<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/posts/desk.html" class="nav-link sidebar-link sidebar-page" aria-label="知识拓展(electron,qiankun)"><!---->知识拓展(electron,qiankun)<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-note"></span><span class="title">后端</span><!----></p><ul class="sidebar-links"><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">后端语言</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/blog/posts/banana/1.html" class="nav-link sidebar-link sidebar-page" aria-label="java"><!---->java<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/posts/banana/2.html" class="nav-link sidebar-link sidebar-page" aria-label="node"><!---->node<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">收藏</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/blog/site/site1.html" class="nav-link sidebar-link sidebar-page" aria-label="网址收藏"><!---->网址收藏<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/site/method.html" class="nav-link sidebar-link sidebar-page" aria-label="工作中问题及解决"><!---->工作中问题及解决<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><!--[--><a href="/blog/intro.html" class="nav-link sidebar-link sidebar-page" aria-label="个人介绍"><span class="icon iconfont icon-info"></span>个人介绍<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/slides.html" class="nav-link sidebar-link sidebar-page" aria-label="Slide page"><span class="icon iconfont icon-slides"></span>Slide page<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->vuePress and nginx and docker</h1><div class="page-info"><span class="author-info" aria-label="Author🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://github.com/Fankozhang" target="_blank" rel="noopener noreferrer">帆</a></span><span property="author" content="帆"></span></span><!----><span class="date-info" aria-label="Writing Date📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-01-09T00:00:00.000Z"></span><span class="category-info" aria-label="Category🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li><span class="category category1 clickable" role="navigation">Cherry</span></li></ul><meta property="articleSection" content="Cherry"></span><span aria-label="Tag🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li><span class="tag tag3 clickable" role="navigation">red</span></li><li><span class="tag tag0 clickable" role="navigation">small</span></li><li><span class="tag tag6 clickable" role="navigation">round</span></li></ul><meta property="keywords" content="red,small,round"></span><span class="reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 11 min</span><meta property="timeRequired" content="PT11M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">On This Page</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#vuepress基本使用-部署github" class="router-link-active router-link-exact-active toc-link level2">vuePress基本使用（部署github）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#非自动化部署" class="router-link-active router-link-exact-active toc-link level2">(非自动化部署)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#自动化部署" class="router-link-active router-link-exact-active toc-link level2">（自动化部署）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#vuepress主题" class="router-link-active router-link-exact-active toc-link level2">vuepress主题</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#nginx" class="router-link-active router-link-exact-active toc-link level2">nginx</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#安装虚拟机-linux-nginx" class="router-link-active router-link-exact-active toc-link level3">安装虚拟机，linux, nginx</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#基本命令" class="router-link-active router-link-exact-active toc-link level3">基本命令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#增加server-开放端口" class="router-link-active router-link-exact-active toc-link level3">增加server（开放端口）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#nginx日志切割" class="router-link-active router-link-exact-active toc-link level3">nginx日志切割</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#配置静态资源文件服务器-存放静态文件" class="router-link-active router-link-exact-active toc-link level3">配置静态资源文件服务器 （存放静态文件）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#开启gzip压缩" class="router-link-active router-link-exact-active toc-link level3">开启gzip压缩</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#路径匹配" class="router-link-active router-link-exact-active toc-link level3">路径匹配</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#nginx跨域配置" class="router-link-active router-link-exact-active toc-link level3">nginx跨域配置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#配置防盗链" class="router-link-active router-link-exact-active toc-link level3">配置防盗链</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#nginx-搭建-集群" class="router-link-active router-link-exact-active toc-link level3">nginx 搭建 集群</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#nginx中的upstream指令参数" class="router-link-active router-link-exact-active toc-link level3">nginx中的upstream指令参数</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#nginx控制浏览器缓存" class="router-link-active router-link-exact-active toc-link level3">nginx控制浏览器缓存</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#nginx-反向代理缓存" class="router-link-active router-link-exact-active toc-link level3">nginx  反向代理缓存</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#nginx搭建高可用集群" class="router-link-active router-link-exact-active toc-link level3">nginx搭建高可用集群</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#使用nginx出现的问题" class="router-link-active router-link-exact-active toc-link level3">使用nginx出现的问题：</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#docker" class="router-link-active router-link-exact-active toc-link level2">docker</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/posts/cherry.html#操作过程中遇到问题" class="router-link-active router-link-exact-active toc-link level3">操作过程中遇到问题 ：</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="vuepress-and-nginx-and-docker" tabindex="-1"><a class="header-anchor" href="#vuepress-and-nginx-and-docker" aria-hidden="true">#</a> vuePress and nginx and docker</h1><h2 id="vuepress基本使用-部署github" tabindex="-1"><a class="header-anchor" href="#vuepress基本使用-部署github" aria-hidden="true">#</a> vuePress基本使用（部署github）</h2><h2 id="非自动化部署" tabindex="-1"><a class="header-anchor" href="#非自动化部署" aria-hidden="true">#</a> (非自动化部署)</h2><p>github 创建仓库 blog<br> 在 blog 下新建分支 gh-pages</p><p><img src="/blog/press4.png" alt="press1" loading="lazy"></p><p>切换分支到 gh-pages<br> 本地新建 blog 文件夹 连接远程 github仓库<br> 在blog文件夹下下载配置vuepress,并将源代码打包<br> 在github的blog仓库下的settings里面设置git pages,切换到gh-pages<br> 将打包后的dist目录下的文件上传至github的gh-pages 分支。</p><p><img src="/blog/press1.png" alt="press1" loading="lazy"></p><p><img src="/blog/press2.png" alt="press1" loading="lazy"></p><p>在访问github pages显示的地址就可以了，我的地址是 <a href="https://fankozhang.github.io/blog/" target="_blank" rel="noopener noreferrer">https://fankozhang.github.io/blog/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><img src="/blog/press3.png" alt="press1" loading="lazy"></p><p>如果出现样式不显示问题，记得修改base路径<br> 一般base路径改成 &#39; /blog/&#39; ，视自己的文件而定。</p><h2 id="自动化部署" tabindex="-1"><a class="header-anchor" href="#自动化部署" aria-hidden="true">#</a> （自动化部署）</h2><p>github 创建仓库 blog</p><p>本地新建 blog 文件夹 连接远程 github仓库</p><p>在本地blog文件夹中编写源码，在package.json中配置如下的运行命令。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> &quot;scripts&quot;: {
    &quot;docs:build&quot;: &quot;vuepress build src&quot;,
    &quot;docs:clean-dev&quot;: &quot;vuepress dev src --clean-cache&quot;,
    &quot;docs:dev&quot;: &quot;vuepress dev src&quot;
  },
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在blog文件夹下按 <strong>blob/.github/workflows</strong>路径创建文件夹，在workflows文件夹下创建deploy-docs.yml文件，文件内容如下：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>
name: 部署文档

on:
  push:
    branches:
      # 确保这是你正在使用的分支名称
      - main

jobs:
  deploy-gh-pages:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
          # 如果你文档需要 Git 子模块，取消注释下一行
          # submodules: true



      - name: 设置 Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 18
          cache: npm

      - name: 安装依赖
        run: npm ci

      - name: 构建文档
        env:
          NODE_OPTIONS: --max_old_space_size=8192
        run: |-
          npm run docs:build
          &gt; src/.vuepress/dist/.nojekyll

      - name: 部署文档
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          # 这是文档部署到的分支名称
          branch: gh-pages
          folder: src/.vuepress/dist

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当源文件和.github文件的内容都准备好后，将blog文件夹下的内容全部上传到github仓库。工作流运行一段时间后，打包成功，在gh-pages分支查看打包后的源码。随后刷新github pages的网页地址，就能看到更新后的内容。</p><p>当下次对本地blog文件夹下的源代码进行修改时，直接提交远程仓库即可。工作流会自动执行打包命令。等一段时间后刷新，就能看到刷新后的内容了。</p><h2 id="vuepress主题" tabindex="-1"><a class="header-anchor" href="#vuepress主题" aria-hidden="true">#</a> vuepress主题</h2><p>当真正想搞一个vuepree文档网站的时候，不一定从头搭建，可以使用适应的主题，使用主题可以实现快速搭建项目，主题可以自己搜索，我使用的主题是 <a href="https://theme-hope.vuejs.press/zh/" target="_blank" rel="noopener noreferrer">vuepress-theme-hope <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="nginx" tabindex="-1"><a class="header-anchor" href="#nginx" aria-hidden="true">#</a> nginx</h2><p><a href="https://www.bilibili.com/video/BV1ZU4y1m7GL?p=1&amp;vd_source=f25f5a8d75a3a60d5a288f726803ec11" target="_blank" rel="noopener noreferrer">参考视频 nginx_哔哩哔哩_bilibili<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://blog.csdn.net/qq_44299529/category_11626217.html" target="_blank" rel="noopener noreferrer">参考博客专栏<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://www.w3schools.cn/nginx/nginx_http_expires.asp" target="_blank" rel="noopener noreferrer">Nginx expires 页面缓存时间配置 (w3schools.cn)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="安装虚拟机-linux-nginx" tabindex="-1"><a class="header-anchor" href="#安装虚拟机-linux-nginx" aria-hidden="true">#</a> 安装虚拟机，linux, nginx</h3><p>装上centos7 linux。在Linux上安装 nginx 我参考了如下两篇文章</p><p><a href="https://juejin.cn/post/6990643580809248781" target="_blank" rel="noopener noreferrer">Linux Nginx安装及使用 - 掘金 (juejin.cn)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://juejin.cn/post/7136114724542316558" target="_blank" rel="noopener noreferrer">Linux安装Nginx - 掘金 (juejin.cn)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>安装nginx的过程中出现 nginx: [emerg] still could not bind() 需要注意端口和进程占用的问题</p><p><a href="https://blog.csdn.net/jiaoshu__/article/details/119304374" target="_blank" rel="noopener noreferrer">(141条消息) 故障排查（Nginx服务启动失败）报错：still could not bind()_吃不吃西红柿的博客-CSDN博客<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://blog.csdn.net/ProBaiXiaodi/article/details/124943251" target="_blank" rel="noopener noreferrer">emerg] still could not bind()怎么解决_一枝风的博客-CSDN博客<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://mp.weixin.qq.com/s/33K0XfZ8bAT95qmrhzvRDw" target="_blank" rel="noopener noreferrer">还在手动配置Nginx？太LOW了，这个超强大的 Nginx 可视化管理工具太牛逼了！ (qq.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="基本命令" tabindex="-1"><a class="header-anchor" href="#基本命令" aria-hidden="true">#</a> 基本命令</h3><p>start nginx.exe // 部署nginx文件后，启动nginx服务</p><p>1、cd /usr/local/nginx/sbin/ <em>//进入目录</em></p><p>2、./nginx <em>//启动</em></p><p>./nginx -t 检查配置文件是否有问题</p><p>./nginx -v 查看nginx版本</p><p>./nginx -h 查看帮助</p><p>3、./nginx -s stop <em>//停止</em></p><p>4、./nginx -s quit <em>//安全退出</em>（比stop友好）</p><p>5、./nginx -s reload <em>//重载配置文件（修改了配置文件需要执行此命令 比较常用）</em></p><p>6、ps aux|grep nginx <em>//查看ngnix进程</em></p><p>ps -ef|grep nginx 查看nginx进程</p><p>netstat -ntlp|grep 80 查看端口情况</p><p>kill -9 进程号</p><p>netstat -antp | grep nginx 查看端口是否开启</p><h3 id="增加server-开放端口" tabindex="-1"><a class="header-anchor" href="#增加server-开放端口" aria-hidden="true">#</a> 增加server（开放端口）</h3><p>当在一个config文件里配置多个server时，要将server里监听的端口号开放出来，否则外部访问不了</p><p><a href="https://blog.csdn.net/qq_42584971/article/details/103874472" target="_blank" rel="noopener noreferrer">(关于nginx新增对外开放端口的问题_nginx开放端口<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>设置防火墙对外开放端口</p><p>firewall-cmd --list-all 查看开放的端口号 sudo firewall-cmd --add-port=8000/tcp --permanent 开放8000端口 （需要的端口开放出来）</p><p>重启防火墙firewall-cmd --reload</p><h3 id="nginx日志切割" tabindex="-1"><a class="header-anchor" href="#nginx日志切割" aria-hidden="true">#</a> nginx日志切割</h3><p><a href="https://juejin.cn/post/6964052819980582949" target="_blank" rel="noopener noreferrer">Nginx 生产推荐配置以及日志切割清理 )<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>创建定时任务 <a href="https://blog.csdn.net/lc013/article/details/103775702" target="_blank" rel="noopener noreferrer">(141条消息) Linux 定时执行shell 脚本_spearhead_cai的博客-CSDN博客<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="配置静态资源文件服务器-存放静态文件" tabindex="-1"><a class="header-anchor" href="#配置静态资源文件服务器-存放静态文件" aria-hidden="true">#</a> 配置静态资源文件服务器 （存放静态文件）</h3><p>在 根目录的 home 文件夹下新建 assets 文件夹用于存放 静态文件（图片，视频） (自己选择放在那个文件夹下，但要确定配置的文件不能出错)</p><p>nginx.config 增加如下server配置</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 配置静态服务器，存放静态文件</span>
	server <span class="token punctuation">{</span>
        listen       <span class="token number">90</span><span class="token punctuation">;</span>
        server_name  localhost<span class="token punctuation">;</span>
        
         location / <span class="token punctuation">{</span>
            root   html<span class="token punctuation">;</span>
            index  index.html index.htm<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

		<span class="token comment">#同一个server下配置多个locationlocation的匹配路径不能一样</span>
		<span class="token comment"># location后面是路径的匹配规则，会拼接到root路径后面;变成  /home/assets</span>
        
        location /assets <span class="token punctuation">{</span>
            root   /home<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        location /static <span class="token punctuation">{</span>
            <span class="token comment">#alias  用于配置路径的别名</span>
            <span class="token builtin class-name">alias</span>		/home/assets<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>打开监听的 90 端口 sudo firewall-cmd --add-port=90/tcp --permanent ； 重启防火墙firewall-cmd --reload</p><p>重启nginx ./nginx -s reload</p><p>访问路径</p><p><a href="http://192.168.64.128:90/" target="_blank" rel="noopener noreferrer">http://192.168.64.128:90/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 这个会访问到第一个的location的文件</p><p><a href="http://192.168.64.128:90/assets/12345678.png" target="_blank" rel="noopener noreferrer">http://192.168.64.128:90/assets/12345678.png<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 这个会访问到第二个的location的文件（静态资源）</p><p><a href="http://192.168.64.128:90/static/12345678.png" target="_blank" rel="noopener noreferrer">http://192.168.64.128:90/static/12345678.png)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 这个会访问到第三个的location的文件，路径设置别名，访问到的内容一样（静态资源）</p><h3 id="开启gzip压缩" tabindex="-1"><a class="header-anchor" href="#开启gzip压缩" aria-hidden="true">#</a> 开启gzip压缩</h3><p><a href="https://blog.csdn.net/php12345679/article/details/80843939" target="_blank" rel="noopener noreferrer">参考文章 Nginx优化之gzip压缩提升网站速度_苦艾酒丶的博客-CSDN博客<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>gzip配置的常用参数</p><p>gzip on|off; #是否开启gzip</p><p>gzip_buffers 32 4K| 16 8K #缓冲(压缩在内存中缓冲几块? 每块多大?)</p><p>gzip_comp_level [1-9] #推荐6 压缩级别(级别越高,压的越小,越浪费CPU计算资源)</p><p>gzip_disable #正则匹配UA 什么样的Uri不进行gzip</p><p>gzip_min_length 200 # 开始压缩的最小长度(再小就不要压缩了,意义不在)</p><p>gzip_http_version 1.0|1.1 # 开始压缩的http协议版本(可以不设置,目前几乎全是1.1协议)</p><p>gzip_proxied # 设置请求者代理服务器,该如何缓存内容</p><p>gzip_types text/plain application/xml # 对哪些类型的文件用压缩 如txt,xml,html ,css</p><p>gzip_vary on|off # 是否传输gzip压缩标志</p><p>注意：</p><p>图片/mp3这样的二进制文件,不必压缩</p><p>因为压缩率比较小, 比如100-&gt;80字节,而且压缩也是耗费CPU资源的.</p><p>比较小的文件不必压缩,</p><p>示例：nginx config 加入如下配置：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>gzip on;
	gzip_buffers 32 4K;
	gzip_comp_level 6;
        gzip_min_length 100;
	gzip_types  text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;
        gzip_disable &quot;MSIE [1-6]\.&quot;; #配置禁用gzip条件，支持正则。此处表示ie6及以下不启用gzip（因为ie低版本不支持）
        gzip_vary on;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="路径匹配" tabindex="-1"><a class="header-anchor" href="#路径匹配" aria-hidden="true">#</a> 路径匹配</h3><p>= 精确匹配</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>server <span class="token punctuation">{</span>
        listen       <span class="token number">91</span><span class="token punctuation">;</span>
        server_name  localhost<span class="token punctuation">;</span>

	  <span class="token comment">#精确匹配</span>
        location <span class="token operator">=</span> / <span class="token punctuation">{</span>
            root   html<span class="token punctuation">;</span>
            index  index.html index.htm<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
	 location <span class="token operator">=</span> /assets/12345678.png <span class="token punctuation">{</span>
            root   /home<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>~ 正则匹配</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>server <span class="token punctuation">{</span>
        listen       <span class="token number">92</span><span class="token punctuation">;</span>
        server_name  localhost<span class="token punctuation">;</span>

	  <span class="token comment">#正则表达式匹配  *代表不区分大小写，不写区分大小写 （匹配到的后缀名的都能请求到）</span>
        location ~* <span class="token punctuation">\</span>.<span class="token punctuation">(</span>GIF<span class="token operator">|</span>png<span class="token operator">|</span>bmp<span class="token operator">|</span>jpg<span class="token operator">|</span>jpeg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            root   /home<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>^~ 以某个字符路径开头请求</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>server {
        listen       93;
        server_name  localhost;

	  #  ^~ 以某个字符路径开头请求  （ ^  非 的意思）
	  #  可以请求到 /home/assets/img 下的资源,请求不到 /home/assets/video 下的资源
	  
        location  ^~ /assets/img {
            root   /home;
          }
        
    }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nginx跨域配置" tabindex="-1"><a class="header-anchor" href="#nginx跨域配置" aria-hidden="true">#</a> nginx跨域配置</h3><p>参考文章 <a href="https://blog.csdn.net/qq_38011415/article/details/107095403" target="_blank" rel="noopener noreferrer">(141条消息) Nginx跨域配置_程序员小强的博客-CSDN博客_nginx 跨域<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>server <span class="token punctuation">{</span>
        listen       <span class="token number">90</span><span class="token punctuation">;</span>
        server_name  localhost<span class="token punctuation">;</span>

		<span class="token comment">#允许跨域请求的域，* 代表所有</span>
		add_header <span class="token string">&#39;Access-Control-Allow-Origin&#39;</span> *<span class="token punctuation">;</span>
		<span class="token comment">#允许请求的header</span>
		add_header <span class="token string">&#39;Access-Control-Allow-Headers&#39;</span> *<span class="token punctuation">;</span>
		<span class="token comment">#允许带上cookie请求</span>
		add_header <span class="token string">&#39;Access-Control-Allow-Credentials&#39;</span> <span class="token string">&#39;true&#39;</span><span class="token punctuation">;</span>
		<span class="token comment">#允许请求的方法，比如 GET,POST,PUT,DELETE</span>
		add_header <span class="token string">&#39;Access-Control-Allow-Methods&#39;</span> *<span class="token punctuation">;</span>

        location /assets <span class="token punctuation">{</span>
            root   /home<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置防盗链" tabindex="-1"><a class="header-anchor" href="#配置防盗链" aria-hidden="true">#</a> 配置防盗链</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>server {
        listen       90;
        server_name  localhost;

		#允许跨域请求的域，* 代表所有
		add_header &#39;Access-Control-Allow-Origin&#39; *;
		#允许请求的header
		add_header &#39;Access-Control-Allow-Headers&#39; *;
		#允许带上cookie请求
		add_header &#39;Access-Control-Allow-Credentials&#39; &#39;true&#39;;
		#允许请求的方法，比如 GET,POST,PUT,DELETE
		add_header &#39;Access-Control-Allow-Methods&#39; *;

		#防盗链配置 #对源站点进行验证  valid_referers 后面是匹配的域名
        valid_referers  *.imooc.com;
		#非法引入会进入下方判断
		if ($invalid_referer) {
				return 403;
		}

        location /assets {
            
            root   /home;
        }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nginx-搭建-集群" tabindex="-1"><a class="header-anchor" href="#nginx-搭建-集群" aria-hidden="true">#</a> nginx 搭建 集群</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#配置上游服务器 (每一个server都是一台服务器) tomcats是名字，可自己配置
#weight用设置权重，默认为1，weight数值越大，权重越高，请求的次数越多
upstream tomcats {
    server192.168.1.173:8080 weight=1;
    server192.168.1.174:8080 weight=2;
    server192.168.1.175:8080;
    
    #keepalive 加上这个设置可以提高吞吐量  
    keepalive   32;
}
server{
	listen  80;
	servername   www.tomcats.com;
	location / {
     proxy_pass  http://tomcats;
	}
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nginx中的upstream指令参数" tabindex="-1"><a class="header-anchor" href="#nginx中的upstream指令参数" aria-hidden="true">#</a> nginx中的upstream指令参数</h3><p><a href="https://blog.csdn.net/qq_44299529/article/details/122946397" target="_blank" rel="noopener noreferrer">nginx中的upstream指令参数__nginx upstream参数<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="nginx控制浏览器缓存" tabindex="-1"><a class="header-anchor" href="#nginx控制浏览器缓存" aria-hidden="true">#</a> nginx控制浏览器缓存</h3><p>expires用于对缓存的设置（可以在server里面配置，也可以在location里面配置）</p><p><a href="https://cloud.tencent.com/developer/article/1918457" target="_blank" rel="noopener noreferrer">nginx expires配置详解 - 腾讯云开发者社区-腾讯云 (tencent.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>server {
    expires    24h;                             # 设置Expires的值为当前时间之后的24小时，
                         　　                        # Cache-Control的值为24小时
    expires    modified +24h;           # 编辑Expires的值增加24小时，Cache-Control的值增
                                                       # 加24小时
    expires    @15h;                         # 设置Expires的值为当前日的15点，Cache-Control的值
                                                       # 为当前时间到当前日15点的时间差
    expires    $expires;                     # 根据变量$expires的内容设置缓存时间
    add_header Cache-Control no-cache; 
    add_trailer  X-Always $host always;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nginx-反向代理缓存" tabindex="-1"><a class="header-anchor" href="#nginx-反向代理缓存" aria-hidden="true">#</a> nginx 反向代理缓存</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#proxy_cache_path设置缓存保存的目录
#keys_zone设置共享内以及占用的空间大小
#max_size设置缓存大小
#inactive超过此时间，则缓存自动清理
#use_temp_path关闭临时目录

proxy_cache_path /usr/local/nginx/upsteam_cache keys_zone=mycache:5m max_size=1g ina
ctive=30s use_temp_path=off;

server {
        listen       90;
        server_name  localhost;
        
        #proxy_cache	开启使用缓存，缓存名为 keys_zone 后面设置的名字
        proxy_cache    mycache
        #针对200和304状态码的缓存设置过期时间
        proxy_cache_valid   200  304  8h:
        
         location /assets {
            root   /home;
        }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nginx搭建高可用集群" tabindex="-1"><a class="header-anchor" href="#nginx搭建高可用集群" aria-hidden="true">#</a> nginx搭建高可用集群</h3><p>高可用：一般指2台机器启动着相同的业务系统，当有一台机器down机了，另外一台服务器能快速的接管，对于访问当用户是无感知的</p><p>nginx+keepalived</p><p><a href="https://juejin.cn/post/7025845075217219614" target="_blank" rel="noopener noreferrer">手把手教你nginx生产环境下高可用环境搭建 - 掘金 (juejin.cn)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://developer.aliyun.com/article/885619" target="_blank" rel="noopener noreferrer">Nginx+keepalived实现高可用集群-阿里云开发者社区 (aliyun.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="使用nginx出现的问题" tabindex="-1"><a class="header-anchor" href="#使用nginx出现的问题" aria-hidden="true">#</a> 使用nginx出现的问题：</h3><h4 id="耗时长的数据请求-返回404" tabindex="-1"><a class="header-anchor" href="#耗时长的数据请求-返回404" aria-hidden="true">#</a> 耗时长的数据请求，返回404</h4><p>在前台往后台发送了一个请求，实现选取字段导出的功能，返回的一个文档流，由于数据量大，耗时长，选取某些字段时能返回正常的文档流，但选取某些字段时又返回404错误，于是我测试了很多的字段，发现并不是传值字段的问题。而后发现那些返回 404 的请求的,等待服务器响应的时间都是 1min,由此判断，可能是请求响应时长方面的问题，但我查看了前端代码,没找到设置1min时长过期的代码，在1min的基础上，我搜索了网页请求1min返回404是什么问题，最终确认是nginx的配置有问题，参考如下文章 <a href="https://blog.csdn.net/weixin_43568226/article/details/122390109" target="_blank" rel="noopener noreferrer">Nginx报错404，由于请求处理时间过长_<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> <a href="https://blog.csdn.net/HD243608836/article/details/111564684" target="_blank" rel="noopener noreferrer">nginx中的timeout超时设置，请求超时、响应等待超时等_<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 最终解决了问题。（nginx默认的超时时长为60s,而我的请求耗时1.4min，没有对超时时长做配置，所以返回了404，增加超时时长后，请求正常返回。）</p><h2 id="docker" tabindex="-1"><a class="header-anchor" href="#docker" aria-hidden="true">#</a> docker</h2><p><a href="https://www.bilibili.com/video/BV1gr4y1U7CY/?spm_id_from=333.337.search-card.all.click&amp;vd_source=f25f5a8d75a3a60d5a288f726803ec11" target="_blank" rel="noopener noreferrer">视频地址 2022版 尚硅谷Docker实战教程_哔哩哔哩_bilibili<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>资料 ：<a href="https://www.aliyundrive.com/s/nh9WKM1ZG6A" target="_blank" rel="noopener noreferrer">https://www.aliyundrive.com/s/nh9WKM1ZG6A<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Docker 官网：<a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">https://www.docker.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Github Docker 源码：<a href="https://github.com/docker/docker-ce" target="_blank" rel="noopener noreferrer">https://github.com/docker/docker-ce<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>安装docker镜像的仓库： <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker Hub Container Image Library | App Containerization<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>docker commit 提交容器副本使之成为一个新的镜像</p><p>·docker commit -m=&quot;提交的描述信息&quot; -a=&quot;作者&quot; 容器ID 要创建的目标镜像名:[标签名]</p><p>docker commit -m=&quot;ubuntu add vim ok&quot; -a=&quot;fankozhang&quot; 50d70d915a7e fankozhang/myubuntu:1.1</p><h3 id="操作过程中遇到问题" tabindex="-1"><a class="header-anchor" href="#操作过程中遇到问题" aria-hidden="true">#</a> 操作过程中遇到问题 ：</h3><h4 id="docker下删除自己创建的镜像报错-cannot-be-forced-image-has-dependent-child-images" tabindex="-1"><a class="header-anchor" href="#docker下删除自己创建的镜像报错-cannot-be-forced-image-has-dependent-child-images" aria-hidden="true">#</a> Docker下删除自己创建的镜像报错 (cannot be forced) - image has dependent child images</h4><p>删除镜像命令 ： docker rmi 镜像Id</p><p>大概意思就是这个镜像被别的镜像所依赖，不能强制删除，需要查找child images，再逐个删除。查找被这个镜像所依赖的镜像命令如下：</p><p><code>docker image inspect --format=&#39;{{.RepoTags}} {{.Id}} {{.Parent}}&#39; $(docker image ls -q --filter since=镜像Id)</code></p><p>将所有需要依赖这个镜像的镜像都删除掉，才能删除这个镜像。</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/docs/posts/cherry.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">Last update: </span><!----></div><div class="meta-item contributors"><span class="label">Contributors: </span><!--[--><!--[--><span class="contributor" title="email: 3180806542@qq.com">东方凝洛</span><!--]--><!--]--></div></footer><nav class="page-nav"><!----><a href="/blog/posts/dragonfruit.html" class="nav-link next" aria-label="uni-app"><div class="hint">Next<span class="arrow right"></span></div><div class="link">uni-app<!----></div></a></nav><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">Default footer</div><div class="copyright">Copyright © 2023 帆</div></footer><!--]--></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/blog/assets/app.cf785be7.js" defer></script>
  </body>
</html>
