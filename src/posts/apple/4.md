# vue

## vueé¡¹ç›®æ‰“åŒ…ä¸€é”®å»æ‰æ‰€æœ‰console.log

åœ¨Vueé¡¹ç›®ä¸­ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨babelæ’ä»¶æ¥å»é™¤æ‰€æœ‰çš„console.logè¯­å¥ã€‚ä»¥ä¸‹æ˜¯ä¸€ç§å¸¸ç”¨çš„æ–¹æ³•ï¼š

1. å®‰è£…babelæ’ä»¶ï¼šbabel-plugin-transform-remove-console

```
npm install babel-plugin-transform-remove-console --save-dev
```

1. åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªbabel.config.jsæ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```
module.exports = {
  presets: [
    '@vue/cli-plugin-babel/preset'
  ],
  plugins: [
    process.env.NODE_ENV === 'production' ? 'transform-remove-console' : ''
  ]
}
```

1. è¿è¡Œæ‰“åŒ…å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š

```
npm run build
```

è¿™æ ·ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œæ‰€æœ‰çš„console.logè¯­å¥éƒ½ä¼šè¢«è‡ªåŠ¨å»é™¤ã€‚

è¯·æ³¨æ„ï¼Œè¿™åªä¼šåœ¨æ‰“åŒ…æ—¶å»é™¤console.logè¯­å¥ï¼Œè€Œä¸ä¼šå½±å“å¼€å‘ç¯å¢ƒä¸‹çš„è°ƒè¯•ä¿¡æ¯ã€‚

ä½ å¯ä»¥å‚è€ƒä»¥ä¸‹é“¾æ¥è·å–æ›´å¤šå…³äºæ­¤è¯é¢˜çš„ä¿¡æ¯ï¼š

- [Vue CLIå®˜æ–¹æ–‡æ¡£ - Babelé…ç½®](https://cli.vuejs.org/zh/guide/browser-compatibility.html#babel)
- [babel-plugin-transform-remove-console](https://www.npmjs.com/package/babel-plugin-transform-remove-console)

ç»§ç»­èŠå¤©

## ç›¸å…³æœç´¢

## element  uiæŒ‰éœ€å¯¼å…¥

 `cnpm install element-ui --save-dev` 

main.js

```
import {
    Button,
    Popover,
    Cascader,
    CascaderPanel
} from 'element-ui'

Vue.use(Button)
Vue.use(Popover)
Vue.use(Cascader)
Vue.use(CascaderPanel)
```

åœ¨ä½¿ç”¨ç»„ä»¶çš„é¡µé¢å¯¼å…¥æ ·å¼

```
import 'element-ui/lib/theme-chalk/index.css'
```



## vueå®ç°ç™»å½•åè·³è½¬åˆ°ä¹‹å‰çš„é¡µé¢

 [(202æ¡æ¶ˆæ¯) vueå®ç°ç™»å½•åè·³è½¬åˆ°ä¹‹å‰çš„é¡µé¢_longzhoufengçš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/longzhoufeng/article/details/106646698) 

main.js

```
router.beforeEach((to, from, next) => {
    if (to.path == '/login' && from.path!='/register') {
    	//ä¿å­˜å½“å‰è·¯ç”±
        localStorage.setItem("preRoute", router.currentRoute.fullPath)
    }
    next()
})
```

 ç™»å½•ç•Œé¢ login.vue 

```
this.$store.dispatch("Login", this.loginForm).then(response => {
	if (response.code == 200) {
		const curr = localStorage.getItem('preRoute')
		if (curr == null) {
			this.$router.push({ path: "/user_center" });
		} else {
			this.$router.push({ path: curr });
		}
		this.$message({ message: response.msg, type: "success", "duration": 1000 });
	} else {
		this.$message.error(response.msg);
	}
}).catch((response) => {
	this.$message.error('è¯·è”ç³»ç®¡ç†å‘˜ï¼ï¼ï¼');
});
```



## vue2å’Œvue3å“åº”å¼ï¼ˆç®€æ˜“ç‰ˆï¼‰

vue2é€šè¿‡éå†å¾ªç¯å¯¹è±¡å±æ€§ï¼ˆfor key in objï¼‰ï¼Œåœ¨å¯¹æ¯ä¸€ä¸ªå±æ€§çš„å€¼ç”¨ Object.defineProperty è¿›è¡Œgetterå’Œsetterçš„æ”¹é€  

vue3é€šè¿‡Proxyï¼ˆä»£ç†ï¼‰å’ŒReflectï¼ˆåå°„ï¼‰çš„ä½¿ç”¨å®Œæˆ å“åº”å¼ã€‚

```js
function observe(data){
  if(!data || typeof data !== 'object') return
  for(let key in data){
    let value = data[key]
    Object.defineProperty(data, key, {
      enumerable: true,
      configurable: true,
      get(){
        return value
      },
      set(newVal){
        value = newVal
      }
    })
    if(typeof value === 'object'){
      observe(value)
    }
  }
}
```

```js
function reactive(obj){
  const handler = {
    get(target, key, receiver){
      const value = Reflect.get(...arguments)
      if(typeof value === 'object'){
        return reactive(value)
      }else{
        return value
      }
    },
    set(target, key, val, receiver){
      return Reflect.set(...arguments)
    }
  }
  
  return new Proxy(obj, handler)
}
```



## vuexçš„åŸºæœ¬ä½¿ç”¨   piniaçš„åŸºæœ¬ä½¿ç”¨

å®˜ç½‘ï¼š [å®‰è£… | Pinia ä¸­æ–‡æ–‡æ¡£ (web3doc.top)](https://pinia.web3doc.top/getting-started.html) 

vuexçš„åŸºæœ¬ä½¿ç”¨å¯ä»¥æŸ¥çœ‹ä»¥ä¸‹æ–‡ç« ï¼š

https://juejin.cn/post/6928468842377117709

https://juejin.cn/post/6994337441314242590#heading-15

https://juejin.cn/post/7087100496762109983#heading-16

piniaçš„åŸºæœ¬ä½¿ç”¨å¯ä»¥æŸ¥çœ‹ä»¥ä¸‹æ–‡ç« ï¼š  (piniaç›¸æ¯”vuexç®€å•å¾ˆå¤š)

https://juejin.cn/post/7078281612013764616#heading-0



## vueå®ç°å…¨å±æ»šåŠ¨

é¡µé¢å…¨å±æ»šåŠ¨å¾ˆå¤šç”¨äºå®˜ç½‘é¦–é¡µï¼Œä½¿ç”¨çš„é¢‘ç‡è¿˜æŒºé«˜çš„ï¼Œæ­¤å¤„çš„ä»£ç å®ç°çš„åŠŸèƒ½æ˜¯ é¼ æ ‡æ»šåŠ¨ï¼Œé¡µé¢åˆ‡æ¢ï¼Œç‚¹å‡»é”®ç›˜çš„ä¸Šä¸‹é”®ï¼Œé¡µé¢åˆ‡æ¢ã€‚ç±»ä¼¼æ•ˆæœçœ‹  [ å…¨å±æ»šåŠ¨_jQueryä¹‹å®¶-è‡ªç”±åˆ†äº«jQueryã€html5ã€css3çš„æ’ä»¶åº“ (htmleaf.com)](http://www.htmleaf.com/plus/search.php) ï¼Œä»¥ä¸‹å†…å®¹æ”¹è‡ª [vueå®ç°å…¨å±æ»šåŠ¨ï¼Œéfullpage.js-é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒº (aliyun.com)](https://developer.aliyun.com/article/835013) ã€‚

.vueæ–‡ä»¶

 @mousewheel.prevent   é¼ æ ‡æ»šåŠ¨ï¼Œå®ç°é¡µé¢çš„åˆ‡æ¢

@keyup.prevent   ç‚¹å‡»é”®ç›˜å®ç°é¡µé¢æ»šåŠ¨ï¼Œæ­¤å¤„ä¸ºé”®ç›˜ä¸Šä¸‹é”®ç‚¹å‡»å®ç°é¡µé¢æ»šåŠ¨

```html
<div class="fullPage" ref="fullPage">
	<div
    class="fullPageContainer"
    ref="fullPageContainer"
    @mousewheel.prevent="mouseWheelHandle"
    @keyup.prevent="keyHandle"
    @DOMMouseScroll.prevent="mouseWheelHandle" >
    	<div style="width:100%;height:100vh;overflow: hidden;">
            <div>
            	// è¿™ä¸ªdivå†™é¡µé¢é‡Œé¢çš„å†…å®¹ï¼Œé¡µé¢çš„å†…å®¹å æ»¡ä¸€æ•´ä¸ªå±å¹•
            </div>
        </div>
        <div style="width:100%;height:100vh;overflow: hidden;"></div>
        <div style="width:100%;height:100vh;overflow: hidden;"></div>
		<div style="width:100%;height:100vh;overflow: hidden;"></div>
		........
        //  æœ‰å‡ ä¸ªå…¨å±æ»šåŠ¨çš„é¡µé¢ï¼Œå°±å†™å‡ ä¸ªdiv
    </div>
</div>
```

css

```css
<style lang="less" scoped>
.fullPage{
  height: 100%;//ä¸€å®šè¦è®¾ç½®ï¼Œä¿è¯å æ»¡
  overflow: hidden;//ä¸€å®šè¦è®¾ç½®ï¼Œå¤šä½™çš„å…ˆéšè—
}
.fullPageContainer{
  width: 100%;
  height: 100%;
  transition: all linear 0.5s;
}
</style>
```

script

```javascript
mounted(){
    //  æ²¡æœ‰åœ¨mountedé‡ŒåŠ ä¸Šé”®ç›˜ç‚¹å‡»äº‹ä»¶ï¼Œä½¿ç”¨é”®ç›˜ç‚¹å‡»åˆ‡æ¢é¡µé¢ä¼šå‡ºbugã€‚å³ç‚¹å‡»å®Œé¡µé¢æ—¶èƒ½ä½¿ç”¨é”®ç›˜å®ç°é¡µé¢æ»šåŠ¨ï¼Œå½“ç‚¹å‡»äº†ç½‘é¡µå¤–åœ¨ç‚¹å‡»å›ç½‘é¡µå†…ï¼Œé”®ç›˜ä¸Šä¸‹é”®åˆ‡æ¢é¡µé¢ä¼šå¤±æ•ˆã€‚
	window.addEventListener('keyup', this.keyHandle, false)
},

methods:{
   next () { // å¾€ä¸‹åˆ‡æ¢
      const len = 4 // é¡µé¢çš„ä¸ªæ•°
      if (this.fullpage.current + 1 <= len) { // å¦‚æœå½“å‰é¡µé¢ç¼–å·+1 å°äºæ€»ä¸ªæ•°ï¼Œåˆ™å¯ä»¥æ‰§è¡Œå‘ä¸‹æ»‘åŠ¨
        this.fullpage.current += 1 // é¡µé¢+1
        this.move(this.fullpage.current) // æ‰§è¡Œåˆ‡æ¢
      }
    },
    pre () { // å¾€ä¸Šåˆ‡æ¢
      if (this.fullpage.current - 1 > 0) { // å¦‚æœå½“å‰é¡µé¢ç¼–å·-1 å¤§äº0ï¼Œåˆ™å¯ä»¥æ‰§è¡Œå‘ä¸‹æ»‘åŠ¨
        this.fullpage.current -= 1// é¡µé¢+1
        this.move(this.fullpage.current)// æ‰§è¡Œåˆ‡æ¢
      }
    },
    move (index) {
      this.fullpage.isScrolling = true // ä¸ºäº†é˜²æ­¢æ»šåŠ¨å¤šé¡µï¼Œéœ€è¦é€šè¿‡ä¸€ä¸ªå˜é‡æ¥æ§åˆ¶æ˜¯å¦æ»šåŠ¨
      this.directToMove(index) // æ‰§è¡Œæ»šåŠ¨
      setTimeout(() => { // è¿™é‡Œçš„åŠ¨ç”»æ˜¯1sæ‰§è¡Œå®Œï¼Œä½¿ç”¨setTimeoutå»¶è¿Ÿ1såè§£é”
        this.fullpage.isScrolling = false
      }, 500)
    },
    directToMove (index) {
      const height = document.body.clientHeight
      // const height = this.$refs['fullPage'].clientHeight // è·å–å±å¹•çš„å®½åº¦
      const scrollPage = this.$refs['fullPageContainer'] // è·å–æ‰§è¡Œtarnsformçš„å…ƒç´ 
      let scrollHeight = '' // è®¡ç®—æ»šåŠ¨çš„å‘Šè¯‰ï¼Œæ˜¯å¾€ä¸Šæ»šè¿˜å¾€ä¸‹æ»š
      scrollHeight = -(index - 1) * height + 'px'
      scrollPage.style.transform = `translateY(${scrollHeight})`
      this.fullpage.current = index
    },
    mouseWheelHandle (event) { // ç›‘å¬é¼ æ ‡ç›‘å¬
      // æ·»åŠ å†’æ³¡é˜»æ­¢
      const evt = event || window.event
      if (evt.stopPropagation) {
        evt.stopPropagation()
      } else {
        evt.returnValue = false
      }
      if (this.fullpage.isScrolling) { // åˆ¤æ–­æ˜¯å¦å¯ä»¥æ»šåŠ¨
        return false
      }
      const e = event.originalEvent || event
      this.fullpage.deltaY = e.deltaY || e.detail // Firefoxä½¿ç”¨detail
      if (this.fullpage.deltaY > 0) {
        this.next()
      } else if (this.fullpage.deltaY < 0) {
        this.pre()
      }
    },
    keyHandle (event) {
      const evt = event || window.event
      if (evt.keyCode === 40) { // ä¸‹æ»‘
        this.next()
      }
      if (evt.keyCode === 38) {
        this.pre()
      }
    },
}
```

## vueé¡¹ç›®è·³è½¬æ—¶å¦‚ä½•åŠ å¯†è·¯ç”±ä¸Šé¢queryä¼ é€’çš„å‚æ•°

 [vue-routerè·¯ç”±ä¸­å¯¹queryä¸­çš„å‚æ•°è¿›è¡ŒåŠ å¯†_router å‚æ•°åŠ å¯†_å‰ç«¯_å°å­¦ç”Ÿçš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/weixin_44243061/article/details/107092308) 

 [vue-routerä¸­ä¼ é€’çš„å‚æ•°è¿›è¡Œè‡ªåŠ¨åŠ å¯†æ˜¾ç¤ºï¼Œç»„ä»¶ä¸­è·å–è‡ªåŠ¨è§£å¯† (github.com)](https://github.com/wukang0718/vueRouterEncryption) 

(å®é™…ä½¿ç”¨æœ‰bug,åœ¨æ–°é¡µé¢æ‰“å¼€å¸¦å‚æ•°çš„urlæ—¶ï¼ŒåŠ å¯†çš„å‚æ•°å¹¶ä¸èƒ½å¤Ÿè§£æå‡ºæ¥)

## åç«¯è¿”å›å¾ˆå¤§çš„æ•°æ®é‡ï¼Œå‰ç«¯å¦‚ä½•æ¸²æŸ“

https://mp.weixin.qq.com/s/pWsntJbJnBip5CbP7HkvFg

## viteåˆ›å»ºvue3é¡¹ç›®

[ååˆ†é’Ÿæ­å»º Vite+Vue3 é¡¹ç›®æ¨¡æ¿ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7276408879365636156)

æ™®é€šåˆ›å»ºviteé¡¹ç›®

```
npm init vite@latest
```

æ¨¡æ¿åˆ›å»ºé¡¹ç›®

```
npm init vite@latest myproject -- --template vue
```

å¦‚æœä½¿ç”¨æ™®é€šåˆ›å»ºçš„æ–¹å¼ï¼Œä¾æ¬¡é€‰æ‹©éœ€è¦çš„é…ç½®é¡¹å³å¯ï¼Œå¦‚æœæ¨¡æ¿åˆ›å»ºï¼Œå³å¯ç›´æ¥ä¸‹è½½ä¾èµ–è¿è¡Œ

#### é…ç½®è·¯ç”±ï¼š

```
npm install vue-router
```

srcç›®å½•ä¸‹åˆ›å»ºroteræ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä¸‹åˆ›å»º index.js

srcç›®å½•ä¸‹åˆ›å»ºviewsæ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾é¡µé¢ã€‚æ­¤å¤„åˆ›å»ºabout.vueå’Œlist.vueç”¨äºæµ‹è¯•

router/index.jså†…å®¹å¦‚ä¸‹ï¼š

```vue
import {
    createRouter,
    createWebHashHistory
} from 'vue-router'

const router = createRouter({
    history: createWebHashHistory(),
    // createWebHashHistory ç”¨æ¥é…ç½®å†…éƒ¨ä½¿ç”¨hashæ¨¡å¼è·¯ç”±
    routes: [{
            path: '/',
            redirect: '/about'
        },
        {
            path: '/about',
            name: 'about',
            component: () =>
                import ('../views/about.vue')
        },
        {
            path: '/list',
            name: 'list',
            component: () =>
                import ('../views/list.vue')
        },
    ]
})

export default router
```

åœ¨main.jså¼•å…¥è·¯ç”±æ–‡ä»¶å¹¶ä½¿ç”¨

```vue
import { createApp } from 'vue'
import './style.css'    // å¯¹äºåŸå§‹æ ·å¼ä¸éœ€è¦å¯ä»¥æ³¨é‡Šæ‰
import App from './App.vue'
import router from './router/index'

createApp(App).use(router).mount('#app') 
```

app.vueä¸­åªç•™ä¸‹

```
<template>
  <router-view></router-view>
</template>
```

åœ¨ä½¿ç”¨è·¯ç”±çš„é¡µé¢ä¸­ä½¿ç”¨å‡½æ•°å¼è·¯ç”±è·³è½¬

```vue
<template>
	<div>
		{{$route.query}}   //ç•Œé¢ä¸­å¯ä»¥é€šè¿‡ $route.query æ¥è·å–å‚æ•°
	</div>
</template>

<script setup lang="ts">
import { useRoute,useRouter } from "vue-router";
const router=useRouter()
const route=useRoute()

const go=()=>{
   router.push({path:'/list',query:{name:'å¼ ä¸‰'}})
}

onMounted(()=>{
    console.log("route",route.query)
}

</script>
```

è‡³æ­¤ï¼Œè·¯ç”±é…ç½®å®Œæˆã€‚

**æ³¨æ„ï¼švue3ä¸­å¼•å…¥çš„ç»„ä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨**

#### vite.config.js é…ç½®  serveræœåŠ¡  @ è·¯å¾„

```
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import {
    resolve
} from "path"

// https://vitejs.dev/config/
export default defineConfig({
    plugins: [vue()],
    server: {
        // å¯åŠ¨åæ‰“å¼€æµè§ˆå™¨
        open: true,
        // è®¾ç½®ä¸»æœº
        host: '127.0.0.1',
        // è®¾ç½®ç«¯å£
        port: 3001
    },
    resolve: {
        // â†“è·¯å¾„åˆ«åï¼Œä¸»è¦æ˜¯è¿™éƒ¨åˆ†
        alias: {
            "@": resolve(__dirname, "./src")
        }
    }
})
```

#### ä¸‹è½½lessä¾èµ–

```

npm i less-loader less style-resources-loader --save-dev
```

#### ä¸‹è½½é…ç½®  element-plus

```
npm install element-plus --save
```

main.js

```js
import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'

// element-plusé»˜è®¤è‹±æ–‡ï¼Œä¸­æ–‡é…ç½®
// import zhCn from 'element-plus/lib/locale/lang/zh-cn' è¿™ä¸ªè·¯å¾„ä¼šæŠ¥é”™
import zhCn from 'element-plus/es/locale/lang/zh-cn'
createApp(App).use(router).use(ElementPlus, {locale: zhCn}).mount('#app')
```

#### ä¸‹è½½é…ç½®axios

```
npm install axios qs
```

src/utils ä¸‹åˆ›å»º request.js å°è£…axiosè¯·æ±‚

(å†™æ³•1)

```js
// æ ¹æ®ç¯å¢ƒå˜é‡åŒºåˆ†æ¥å£é»˜è®¤åœ°å€
switch(process.env.NODE_ENV){
    case "production":
        axios.defaults.baseURL="http://api.fanko.cn";
        break;
    case "test":
        axios.defaults.baseURL="http://192.168.20.12:8080";
        break;
    default:
        axios.defaults.baseURL="http://127.0.0.1:3000";
}
//  è®¾ç½®è¶…æ—¶æ—¶é—´å’Œè·¨åŸŸæ˜¯å¦å…è®¸æºå¸¦å‡­è¯
axios.defaults.timeout=10000;
axios.defaults.withCredentials=true;
/*
*  è®¾ç½®è¯·æ±‚ä¼ è¾“æ•°æ®çš„æ ¼å¼(çœ‹æœåŠ¡å™¨è¦æ±‚ä»€ä¹ˆç±»å‹çš„æ•°æ®æ ¼å¼)   x-www-form-urlencodedæ˜¯ä¸€ç§æ•°æ®æ ¼å¼
*  transformRequest åªå¯¹postè¯·æ±‚æœ‰ä½œç”¨ï¼Œæ ¹æ®å®é™…è¦æ±‚å†³å®šè®¾ç½®ä¸è®¾ç½®
*/
axios.defaults.headers['Content-Type'] = 'application/x-www-form-urlencoded';
axios.defaults.transformRequest = data => {qs.stringify(data)};

// è®¾ç½®è¯·æ±‚æ‹¦æˆªå™¨   å®¢æˆ·ç«¯å‘é€è¯·æ±‚ => [è¯·æ±‚æ‹¦æˆªå™¨] => æœåŠ¡å™¨ å®¢æˆ·ç«¯å‘é€è¯·æ±‚ç»™æœåŠ¡å™¨çš„é…ç½®é¡¹å°±æ˜¯ config
// tokenæ ¡éªŒï¼ˆJWTï¼‰ æ¥å—æœåŠ¡å™¨è¿”å›çš„token å­˜å‚¨åˆ°vuex/æœ¬åœ°å­˜å‚¨ä¸­ 
// æ¯ä¸€æ¬¡å‘æœåŠ¡å™¨å‘è¯·æ±‚åº”è¯¥æŠŠ token å¸¦ä¸Š
axios.interceptors.request.use(
  config => {     //è¯·æ±‚æˆåŠŸæ—¶æ‰§è¡Œ
    //è·å–æœ¬åœ°å­˜å‚¨ä¸­çš„token
    let token = localStorage.getItem('token');
    //  éªŒè¯tokenå­˜åœ¨ï¼Œè¯·æ±‚å¤´å¸¦ä¸Š token
    token && (config.headers.Authorization = token);
    return config;
  },
  error => {  //è¯·æ±‚å¤±è´¥æ—¶æ‰§è¡Œ
    return Primise.reject(error)
  }
 )
// è®¾ç½®å“åº”æ‹¦æˆªå™¨  æœåŠ¡å™¨è¿”å›ä¿¡æ¯ => [å“åº”æ‹¦æˆªå™¨ç»Ÿä¸€å¤„ç†] => å®¢æˆ·ç«¯
/*  axios.defaults.validateStatus=status=>{  åŸºæœ¬å…¬å¸ä¸ç”¨é…ç½®
*      // è‡ªå®šä¹‰å“åº”æˆåŠŸçš„HTTPçŠ¶æ€ç 
*      return /^(2|3)\d{2}$/.test(status);
*/  }

axios.interceptors.response.use(
  response=>{
     return response.data;
  },error => {//æ‹¦æˆªå¤±è´¥
    return Primise.reject(error);
    let {response } = error;
    if(response) {
        switch (response.status) {
           case 401://æƒé™é—®é¢˜,æç¤ºæœªç™»å½•æˆ–æ— æƒé™ç­‰ï¼›
           break;
           case 403://æœåŠ¡å™¨æ‹’ç»æ‰§è¡Œ ï¼ˆtokenè¿‡æœŸï¼‰
           break;
           case 404://æ‰¾ä¸åˆ°é¡µé¢
           break;
        }
    } else {
        //æœåŠ¡å™¨è¿ç»“æœéƒ½æ²¡æœ‰è¿”å›
        if(!window.navigator.onLine) {
            //æ–­ç½‘å¤„ç†ï¼šè·³è½¬æ–­ç½‘é¡µé¢/æç¤ºç½‘ç»œé”™è¯¯ç­‰ç­‰
            return;
        }
        return Promise.reject(error)
    }
  }
)

export default axios;
```

(å†™æ³•2)

```js
//åˆ›å»ºä¸€ä¸ªæ–° axios å®åŠ›
// è¯·æ±‚æ‹¦æˆªå™¨ï¼Œå¦‚æœæœ‰ token è¿›è¡Œå¤´éƒ¨æºå¸¦
// å“åº”æ‹¦æˆªå™¨ï¼Œ å‰¥ç¦»æ— æ•ˆtoken å¤„ç† token å¤±æ•ˆ
// å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨å½“å‰ axios å®ä¾‹ï¼Œè¿”å›å€¼ promise

import axios from "axios";
//  å¯¼å‡ºåŸºå‡†åœ°å€ï¼ŒåŸå› ï¼š å…¶ä»–åœ°æ–¹ä¸æ˜¯é€šè¿‡ axios å‘é€è¯·æ±‚çš„åœ°æ–¹ç”¨ä¸ŠåŸºå‡†åœ°å€
export const baseURL='http://localhost:8084'
const instance=axios.create({
    // axios çš„ä¸€äº›é…ç½®ï¼Œbaseurl timeout 
    baseURL,
    timeout:5000
})

instance.interceptors.request.use(config=>{
    return config
},err=>{
    return Promise.reject(err)
})

// res => res.data  å–å‡ºdataæ•°æ®ï¼Œå°†æ¥è°ƒç”¨æ¥å£çš„æ—¶å€™ç›´æ¥æ‹¿åˆ°çš„å°±æ˜¯åå°çš„æ•°æ®
instance.interceptors.response.use(res=>res.data,err=>{
    return Primise.reject(error);
    let {response } = error;
    if(response) {
        switch (response.status) {
           case 401://æƒé™é—®é¢˜,æç¤ºæœªç™»å½•æˆ–æ— æƒé™ç­‰ï¼›
           break;
           case 403://æœåŠ¡å™¨æ‹’ç»æ‰§è¡Œ ï¼ˆtokenè¿‡æœŸï¼‰
           break;
           case 404://æ‰¾ä¸åˆ°é¡µé¢
           break;
        }
    } else {
        //æœåŠ¡å™¨è¿ç»“æœéƒ½æ²¡æœ‰è¿”å›
        if(!window.navigator.onLine) {
            //æ–­ç½‘å¤„ç†ï¼šè·³è½¬æ–­ç½‘é¡µé¢/æç¤ºç½‘ç»œé”™è¯¯ç­‰ç­‰
            return;
        }
        return Promise.reject(error)
    }
})

export default(url,method,submitData)=>{
    // è´Ÿè´£å‘è¯·æ±‚ï¼šè¯·æ±‚åœ°å€ï¼Œè¯·æ±‚æ–¹å¼ï¼Œ æäº¤æ•°æ®
    return instance({
        url,
        method,
        // 1. å¦‚æœæ˜¯getè¯·æ±‚  éœ€è¦ä½¿ç”¨paramsæ¥ä¼ é€’submitData   ?a=10&c=10
        // 2. å¦‚æœä¸æ˜¯getè¯·æ±‚  éœ€è¦ä½¿ç”¨dataæ¥ä¼ é€’submitData   è¯·æ±‚ä½“ä¼ å‚
        // [] è®¾ç½®ä¸€ä¸ªåŠ¨æ€çš„key, å†™jsè¡¨è¾¾å¼ï¼Œjsè¡¨è¾¾å¼çš„æ‰§è¡Œç»“æœå½“ä½œKEY
        // methodå‚æ•°ï¼šget,Get,GET  è½¬æ¢æˆå°å†™å†æ¥åˆ¤æ–­
        // åœ¨å¯¹è±¡ï¼Œ['params']:submitData ===== params:submitData è¿™æ ·ç†è§£
        [method.toLowerCase() === 'get' ? 'params' : 'data']: submitData
    })
}
```

api/use.js

```js
import request from "@/utils/request.js";

export const addUser=(data)=>{
    return request('/user','post',data)
}

export const getListTest=()=>{
    return request('/user/string','get')
}
```

#### é…ç½®è·¨åŸŸ(vite.config.js)

```js
export default defineConfig({
  plugins: [vue()],
  server: {
    // å¯åŠ¨åæ‰“å¼€æµè§ˆå™¨
    open: true,
    proxy: {
      '/api': { //è¯·æ±‚è·¯å¾„å…³é”®å­—
          target: 'http://localhost:8084', //å¯¹åº”è‡ªå·±çš„æ¥å£
          changeOrigin: true,//æ˜¯å¦å…è®¸è·¨åŸŸ,åœ¨æœ¬åœ°ä¼šåˆ›å»ºä¸€ä¸ªè™šæ‹ŸæœåŠ¡ç«¯ï¼Œç„¶åå‘é€è¯·æ±‚çš„æ•°æ®ï¼Œ
                              // å¹¶åŒæ—¶æ¥æ”¶è¯·æ±‚çš„æ•°æ®ï¼Œè¿™æ ·æœåŠ¡ç«¯å’ŒæœåŠ¡ç«¯è¿›è¡Œæ•°æ®çš„äº¤äº’å°±ä¸ä¼šæœ‰è·¨åŸŸé—®é¢˜
          ws: true,
          pathRewrite: {
              '^/api': ''      //è¿™é‡Œç†è§£æˆç”¨â€˜/apiâ€™ä»£æ›¿targeté‡Œé¢çš„åœ°å€ï¼Œåé¢ç»„ä»¶ä¸­æˆ‘ä»¬æ‰æ¥å£æ—¶ç›´æ¥ç”¨apiä»£æ›¿
          }
      }
  }
  },
  resolve: {
      // â†“è·¯å¾„åˆ«åï¼Œä¸»è¦æ˜¯è¿™éƒ¨åˆ†
      alias: {
          "@": resolve(__dirname, "./src")
      }
  }
})

```

é™¤äº†å‰ç«¯é…ç½®ä»£ç†ä¹‹å¤–ï¼Œåå°ä¹Ÿè¦é…ç½®è·¨åŸŸï¼Œå¦åˆ™è¯·æ±‚ä¸åˆ°ï¼Œåå°è·¨åŸŸè§£å†³å¯ä»¥å‚è€ƒä¸‹é¢çš„æ–‡ç« 

 [SpringBoot é¡¹ç›®è§£å†³è·¨åŸŸçš„å‡ ç§æ–¹æ¡ˆ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7229139006080253989) 

ï¼ˆvue3ä¸­ä½¿ç”¨æ¶ˆæ¯æç¤º  [vue3ä¸­ä½¿ç”¨element-plusè°ƒç”¨message_element-plus message_](https://blog.csdn.net/qq_40185480/article/details/110926273) ï¼‰

#### é…ç½®pinia

```
npm install pinia
```

main.js

```
import { createPinia } from 'pinia'

createApp(App).use(router).use(ElementPlus).use(createPinia()).mount('#app') 
```

store/index.js

  Store æ˜¯ä½¿ç”¨ `defineStore()` å®šä¹‰çš„ï¼Œå¹¶ä¸”å®ƒéœ€è¦ä¸€ä¸ª**å”¯ä¸€**åç§°ï¼Œä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ï¼š 

```js
//pinia ä¸­ä½¿ç”¨ definStore æ–¹æ³•æ¥å®šä¹‰ store
import { defineStore } from 'pinia'

// useStore å¯ä»¥æ˜¯ useUserã€useCart ä¹‹ç±»çš„ä»»ä½•ä¸œè¥¿
// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åº”ç”¨ç¨‹åºä¸­ store çš„å”¯ä¸€ id,å¯ä»¥è‡ªå®šä¹‰
//è¿™ä¸ª nameï¼Œä¹Ÿç§°ä¸º idï¼Œæ˜¯å¿…è¦çš„ï¼ŒPinia ä½¿ç”¨å®ƒæ¥å°† store è¿æ¥åˆ° devtoolsã€‚ å°†è¿”å›çš„å‡½æ•°å‘½åä¸º use... æ˜¯è·¨å¯ç»„åˆé¡¹çš„çº¦å®šï¼Œä»¥ä½¿å…¶ç¬¦åˆä½ çš„ä½¿ç”¨ä¹ æƒ¯ã€‚
export const useStore = defineStore('useStore', {
    // other options...
    // state ä¸º store çš„æ ¸å¿ƒï¼Œè¡¨ç¤ºå½“å‰æ¨¡å—çš„çŠ¶æ€
    // ä¸ºäº†å®Œæ•´ç±»å‹æ¨ç†ï¼Œæ¨èä½¿ç”¨ç®­å¤´å‡½æ•°
    state: () => {
        return {
            num: 100
        }
    },
    getters: {
        doubleNum: (state) => state.num * 2,
      },
    // actions å¯ä»¥å®šä¹‰åŒæ­¥å’Œå¼‚æ­¥çš„æ–¹æ³•
    actions: {
        add(){
            this.num++
        },
        addMore(num){
            this.num+=num
        }
    }
})
```

.vue æ–‡ä»¶å¼•å…¥ä½¿ç”¨

```vue
<template>
  <div>
   <div>
    {{ store.num }}  {{ store.doubleNum }}
   </div> 
   <div>
    <el-button @click="add" size="mini" style="background-color: aquamarine;"> +1 </el-button>
    <el-button @click="addMore(3)" size="mini" style="background-color: aquamarine;"> +3 </el-button>
    <el-button @click="storeReset" size="mini"  style="margin-left:20px;background-color: aquamarine;"> é‡ç½® </el-button>
   </div>
   <div>
    
   </div>
  </div>
</template>

<script setup lang='ts'>
import {useStore} from '@/store/index.js';

const store=useStore()
onMounted(() => {
    
})
const add=()=>{
    store.add()
}
// ä¼ å‚
const addMore= (num) =>{
    store.addMore(num)
}
const storeReset=()=>{
    //æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨ store ä¸Šçš„ $reset() æ–¹æ³•å°†çŠ¶æ€ é‡ç½® åˆ°å…¶åˆå§‹å€¼
    store.$reset()
}

</script>
```



## ä½¿ç”¨ä¸‰æ–¹åº“



### lodashä½¿ç”¨

```
import _ from 'lodash'

// é˜²æŠ–
 add: _.debounce(function () {
        // è¯·æ±‚æ¥å£
        console.log('123')
        }, 800),
```

###  æ ‘å½¢ç»“æ„æ’ä»¶ vue2-org-tree(ç»„ç»‡ç»“æ„å›¾)

 [Vue æ ‘å½¢ç»“æ„æ’ä»¶ vue2-org-tree - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7011705093665849375) 

 [è¯¦è§£æ ‘çŠ¶ç»“æ„å›¾ vue-org-tree - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/117300250) 



### Vue3 ä¸­å¼•å…¥wangeditorå¯Œæ–‡æœ¬ç¼–è¾‘å™¨

```
npm i wangeditor -S
```

åœ¨éœ€è¦ç”¨åˆ°çš„é¡µé¢å¼•å…¥

```
//è¿™é‡Œåå­—æ— æ‰€è°“, å°±æ˜¯å¾…ä¼šnewçš„æ—¶å€™è¦ç”¨è¿™ä¸ªåå­—new
import EWangEditor from "wangeditor";
```

åœ¨é¡µé¢å†…ä½¿ç”¨

```vue
<script setup lang="ts">
import { ref ,reactive} from '@vue/reactivity'
import EWangEditor from "wangeditor";
import { onMounted } from '@vue/runtime-core';

let data=reactive({})

onMounted(()=>{
  console.log("onMounted",a,b,c)
  //è¿™é‡Œçš„"#editor"å¯¹åº”è¦æ¸²æŸ“ä¸ºç¼–è¾‘å™¨çš„htmlå…ƒç´ çš„id, å°±åƒä»¥å‰çš„querySelector()
  let editor=new EWangEditor("#editor")
  editor.config.uploadImgShowBase64 = true;
  // ä½ åœ¨wangeditorå†…å†™å…¥çš„å­—ç¬¦ä¼šè¢«wangeditorè‡ªåŠ¨è½¬ä¸ºHTML, æˆ‘ä»¬è®¾å®šçš„æ›´æ–°é¢‘ç‡, å³å®ƒæ¯éš”å¤šä¹…å°†ä½ çš„æ–‡å­—æå–å¹¶è½¬æ¢ä¸ºHTMLä¸€æ¬¡.
  /* é…ç½®æ£€æµ‹å­—ç¬¦å˜åŒ–çš„æœ€çŸ­æ—¶é—´é—´éš”ï¼Œé»˜è®¤ä¸º 200ms */
  editor.config.onchangeTimeout=400
  //å¦‚æœæ£€æµ‹åˆ°é”™è¯¯çš„è¯å°±æ‰“å°.
  editor.config.customAlert=(err)=>{
    console.log(err)
  }
  editor.customConfig=editor.customConfig ? editor.customConfig : editor.config
  //è®¾ç½®customConfigå±æ€§
  //è®¾ç½®customConfigå¯¹ç¼–è¾‘å™¨å†…æ–‡å­—çš„å˜åŒ–çš„å¤„ç†æ–¹æ³•
  editor.customConfig.onchange = (html) => {  //å‚æ•°htmlå³å·²ç»è½¬åŒ–HTMLæ ¼å¼çš„æ–‡æœ¬
  data.editorContent = html;
  //åœ¨dataä¸­æå‰å£°æ˜editorContentæ¥å­˜å‚¨
  console.log(html);  //å®æ—¶è¾“å‡ºæ›´æ–°çš„htmlæ ¼å¼
  };

   //ä»¥ä¸‹ä¸ºæ–°å¢
  const menuItem = [  //å·¥å…·æ é‡Œæœ‰å“ªäº›å·¥å…·
    "head",
    "bold",
    "fontSize",
    "fontName",
    "italic",
    "underline",
    "indent",
    "lineHeight",
    "foreColor",
    "backColor",
    "link",
    "list",
    "justify",
    "image",
    "video",
  ];

editor.config.menus = [...menuItem]; /* åº”ç”¨è®¾ç½®å¥½çš„å·¥å…·æ  */
     
editor.config.colors = ["#000000", "#eeece0", "#1c487f", "#4d80bf","#fff0f0","#20a8ff"];  /* æ–‡å­—é¢œè‰²ã€èƒŒæ™¯è‰²å¯ä»¥é€‰æ‹©å“ªäº›é¢œè‰²? */
      
editor.config.fontNames = [ /* å­—ä½“å·¥å…·æä¾›å“ªäº›å­—ä½“? */ 
  "é»‘ä½“",
  "ä»¿å®‹",
  "æ¥·ä½“",
  "æ ‡æ¥·ä½“",
  "åæ–‡ä»¿å®‹",
  "åæ–‡æ¥·ä½“",
  "å®‹ä½“",
  "å¾®è½¯é›…é»‘",
];

editor.config.height = 500;  //ä½ å¯èƒ½å‘ç°è¿™ä¸ªç¼–è¾‘å™¨æ˜¯æ²¡æ³•ç”¨æ ·å¼è°ƒé«˜åº¦çš„?
//æ–°å¢è‡³æ­¤
  editor.create()
})
</script>

<template>
  <div>
    <!-- idè¦ä¸ºnew wangeditorå¯¹è±¡æ—¶å€™ä½¿ç”¨çš„idï¼Œstyleè®¾é«˜åº¦å¯ä»¥ä¸è®¾  -->
    <div id="editor" name="editor" ref="editor" style="height:500px"></div>
  </div>
</template>

<style scoped>

</style>

```



### vueä¸­å¼•å…¥äºŒç»´ç ï¼ˆ vue-qr ï¼‰

```
// npm
npm install vue-qr --save
```

```js
//  é¡µé¢å¼•å…¥ç»„ä»¶
// vue2.x 
import VueQr from 'vue-qr'
// vue3.x 
import vueQr from 'vue-qr/src/packages/vue-qr.vue'

```

```
<vue-qr  
         id="vueQrs"   
         :text="textValue"
         :logoSrc="logoPath"
         :logoScale="40" 
         :size="190" 
         :margin="10"
         @click="downloadQR"
     />  
```

| text      | äºŒç»´ç è¦å±•ç¤ºçš„å†…å®¹                                           |
| --------- | ------------------------------------------------------------ |
| logoSrc   | äºŒç»´ç ä¸­é—´çš„å°logo                                           |
| logoScale | å°logoçš„å¤§å°ï¼ˆåˆ«æå¤ªå¤§ï¼Œè¶…è¿‡å®¹é”™ç‡è¯†åˆ«ä¸å‡ºæ¥çš„ï¼‰             |
| size      | æ•´ä¸ªäºŒç»´ç æ‰€å ç©ºé—´çš„å¤§å°ï¼Œï¼ˆå®½é«˜ç›¸ç­‰ï¼ŒåŒ…å«marginï¼‰ å¯èƒ½éœ€è¦ä½ è‡ªå·±ç”¨cssè®¾ç½®ä¸€ä¸‹å›¾ç‰‡å®½é«˜100% |
| margin    | äºŒç»´ç çš„å¤–è¾¹è·ï¼ˆé»˜è®¤ 20pxï¼‰                                  |

```
// äº‹ä»¶å¤„ç†å‡½æ•°(ä¸‹è½½äºŒç»´ç )
	const downloadQR=()=> {
            const a = document.createElement('a')
            // ä¸‹è½½çš„æ–‡ä»¶å
            a.download = 'äºŒç»´ç '
            // url
            let loadElement=document.getElementById("vueQrs")
            a.href = loadElement.src
            // è§¦å‘ç‚¹å‡»
            a.click()
        }
```







### vue3ä¸­ setupè¯­æ³•ç³–ä½¿ç”¨ç»„ä»¶çº§çš„è·¯ç”±å¯¼èˆªå®ˆå«ï¼Œå®šä¹‰ç»„ä»¶name (unplugin-vue-define-options)

 [unplugin-vue-macros(github.com)  ](https://github.com/sxzz/unplugin-vue-macros/blob/HEAD/packages/define-options/README-zh-CN.md) 

>  åœ¨ `<script setup >` ä¸­å¯ä½¿ç”¨ defineOptions å®ï¼Œä»¥ä¾¿åœ¨ `<script setup >` ä¸­ä½¿ç”¨ Options APIã€‚ å°¤å…¶æ˜¯èƒ½å¤Ÿåœ¨ä¸€ä¸ªå‡½æ•°ä¸­è®¾ç½® nameã€propsã€emit å’Œ render å±æ€§ã€‚ æœ‰äº†è¿™ä¸ªå®ï¼Œä½ å°±å¯ä»¥åœ¨ `<script setup>` ä½¿ç”¨ Options APIï¼› 

```
 npm i unplugin-vue-define-options -D 
```

 vite.config.ts 

```vue
import DefineOptions from 'unplugin-vue-define-options/vite'

// https://vitejs.dev/config/
export default defineConfig({
    plugins: [vue(), DefineOptions()],
    resolve: {
        // â†“è·¯å¾„åˆ«åï¼Œä¸»è¦æ˜¯è¿™éƒ¨åˆ†
        alias: {
            "@": resolve(__dirname, "./src")
        }
    }
})
```

åœ¨éœ€è¦çš„ç»„ä»¶é¡µé¢åŠ å…¥ä»£ç ï¼š

```vue
<script setup lang="ts">

defineOptions({
  name: '***',     // nameå¯ç”¨äºé…ç½®ç»„ä»¶ åç§°
  beforeRouteEnter(to, from, next) {
    next((vm) => {
      console.log(vm,to,from,'123456')
    })
  }
})

</script>
```

## vue æ­å»ºç»„ä»¶åº“ï¼ˆç®€æ˜“ï¼‰

 [bç«™å‚è€ƒå­¦ä¹ è§†é¢‘åœ°å€](https://www.bilibili.com/video/BV1Zf4y1u75o?p=1&vd_source=f25f5a8d75a3a60d5a288f726803ec11)    [å‚è€ƒæ–‡ç«   vueç»„ä»¶åº“çš„åŸºæœ¬å¼€å‘æ­¥éª¤ ](https://www.cnblogs.com/luoluo-snow/p/11636943.html) 

ä¸€å¼€å§‹è·Ÿç€è§†é¢‘ç¼–å†™ä»£ç ï¼Œä½†æ˜¯åˆ°äº†webpackæ‰“åŒ…ï¼Œwebpack.component.jsæ–‡ä»¶å’Œä¾èµ–å¼•å…¥æ—¶å‡ºç°äº†æŒºå¤šçš„æŠ¥é”™ï¼ˆå°è¯•äº†å‡ ä¸ªè§£å†³æ–¹æ³•ï¼Œæœ€ç»ˆæ²¡èƒ½è§£å†³ï¼Œåœ¨æ‰“åŒ…å®Œcssåç›´æ¥å‘å¸ƒäº†ï¼‰ï¼Œåœ¨æ‰“åŒ…å‘å¸ƒåˆ°äº†npmç½‘ç«™åå¼•å…¥ç»„ä»¶ï¼Œæ‰“å¼€é¡µé¢æ§åˆ¶å°æŠ¥çº¢ï¼Œæœç„¶å¤±è´¥äº†ã€‚

åæ¥å‚è€ƒæ–‡ç« ï¼Œç”¨è„šæ‰‹æ¶è‡ªå¸¦çš„æ‰“åŒ…ï¼ŒæˆåŠŸéƒ¨ç½²åˆ°npmç½‘ç«™ä¸Šäº†ã€‚ä½¿ç”¨æ­£å¸¸ã€‚

vueç»„ä»¶åº“åˆ¶ä½œï¼šnpmåˆå§‹åŒ–é¡¹ç›®+ç¼–å†™ç»„ä»¶+webpackæ‰“åŒ…js+gulpæ‰“åŒ…css+npmå‘å¸ƒ 

### æ­å»ºvueé¡¹ç›®å’Œè¿è¡Œç¯å¢ƒï¼ˆç¤ºä¾‹ï¼‰vue2ç‰ˆæœ¬

1ã€é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ™®é€šçš„vue2é¡¹ç›®

2ã€æ‰“å¼€é¡¹ç›®ï¼Œå°†srcç›®å½•ä¸‹çš„componentsæ–‡ä»¶å¤¹æ”¾åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ”¹åä¸ºpackages,å°†srcæ–‡ä»¶åæ”¹ä¸ºexamplesã€‚æ­¤æ—¶è¿è¡Œé¡¹ç›®ä¼šæŠ¥é”™ã€‚åŸå› æ˜¯vueå¯»æ‰¾æ–‡ä»¶é»˜è®¤æ˜¯ä»srcç›®å½•ä¸‹å¯»æ‰¾ï¼Œæˆ‘ä»¬æ”¹äº†srcåä¸ºexamplesï¼Œæ‰€ä»¥éœ€è¦å¯¹é…ç½®è¿›è¡Œä¿®æ”¹ã€‚

ä¿®æ”¹æ–¹æ³•ï¼šåˆ›å»ºvue.config,jsæ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹

```js
module.exports = {
    pages: {
        index: {
            entry: 'examples/main.js',
            template: 'examples/index.html',
            filename: 'index.html'
        }
    }
    
     // æ‰©å±• webpack é…ç½®ï¼Œä½¿ examples åŠ å…¥ç¼–è¯‘
    chainWebpack: config => {
        config.module
            .rule('js')
            .include
            .add('/examples')
            .end()
            .use('babel')
            .loader('babel-loader')
    }
}
```

ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼Œé‡å¯é¡¹ç›®ï¼ŒæˆåŠŸè¿è¡Œã€‚

3ã€cssæ–‡ä»¶å¤¹ä¸‹ç¼–å†™cssæ ·å¼ï¼Œï¼ˆå¦‚ç”¨åˆ°scssåˆ™éœ€è¦å¼•å…¥ä¾èµ–ï¼Œæ³¨æ„ç‰ˆæœ¬é—®é¢˜ï¼‰

åˆ›å»ºvueç»„ä»¶æ–‡ä»¶  (packages/lib/demo/src/main.vue)

åˆ›å»ºindex.jsï¼ˆpackages/lib/demo/index.js) ï¼Œè¿™ä¸ªjsæ–‡ä»¶ç”¨äºç¼–å†™æ³¨å†Œç»„ä»¶çš„ä»£ç ï¼Œæœ€ç»ˆå¼•å…¥åˆ°main.js  

å¦‚åˆ›å»ºDemoç»„ä»¶ï¼Œindex.jsä»£ç å¦‚ä¸‹ï¼š

```js
import Demo from '../demo/src/main.vue'

Demo.install = function(Vue) {
    Vue.component(Demo.name, Demo)
}

export default Demo
```

æœ€ç»ˆåœ¨main.jså¼•å…¥cssæ–‡ä»¶å’Œç»„ä»¶æ³¨å†Œçš„jsä»£ç ï¼Œ(æ­¤å¤„çš„demo.scsså±äºå…¨å±€å¼•å…¥äº†ï¼Œåœ¨ç»„ä»¶å†…å¯ä»¥ç›´æ¥ä½¿ç”¨çš„)

```js
import Vue from 'vue'
import App from './App.vue'
import '../packages/css/demo.scss'
import Demo from "../packages/lib/demo/index"

Vue.config.productionTip = false
Vue.use(Demo)

new Vue({
    render: h => h(App),
}).$mount('#app')
```

å½“é…ç½®å®Œæˆåï¼Œé¡¹ç›®å¯æ­£å¸¸è¿è¡Œã€‚

### ç»„ä»¶åˆ¶ä½œ

1ã€ç»„ä»¶è®¾è®¡ï¼ˆé€šç”¨æ€§ï¼‰

2ã€ç¼–å†™htmlå’Œcssæ ·å¼

3ã€ç¼–å†™ç»„ä»¶é€»è¾‘ä»£ç 

4ã€æµ‹è¯•ç»„ä»¶

ï¼ˆcardç»„ä»¶ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼‰

```vue
<template>
  <div class="f-card">
     <div class="f-card-img" :style="width?{width:width+'px'}:{}">
        <img :src="imgSrc" alt="img" :style="imgHeight?{height:imgHeight+'px'}:{}"/>
     </div>
     <div v-if="summary" class="f-card-summary">
        {{summary}}
     </div>
      <div v-else class="f-card-summary">
        <slot></slot>
     </div>
     <!-- <div class="f-card-footer">
        footer
     </div> -->
     <slot name="footer"></slot>
  </div>
</template>

<script>
export default {
    name:'Card',
    props:{
        width:{       //å¡ç‰‡å®½åº¦
            type:Number,
            default:0
        },
        imgSrc:{       //å›¾ç‰‡èµ„æºåœ°å€
            type:String,
            default:''
        },
        imgHeight:{    //å›¾ç‰‡é«˜åº¦
            type:Number,
            default:0
        },
        summary:{    //æ¦‚è¿°
            type:String,
            default:''
        }
    },
  data() {
    return {

    }
  },
  methods: {

  },
  created() {

  },
}
</script>
<style scoped>

</style>
```

```css
.f-card {
    width: 270px;
    border-radius: 8px;
    background: white;
    overflow: hidden;
    padding-bottom: 8px;
    box-shadow: 10px 5px 5px #efefef;
    &-img {
        height: 152px;
        img {
            width: 100%;
            height: 100%
        }
    }
    &-summary {
        padding: 8px;
        font-size: 14px;
        text-align: left;
    }
    &-footer {}
}
```

æµ‹è¯•çš„ç»„ä»¶ä»£ç å¦‚ä¸‹ï¼Œè¿è¡ŒåŠŸèƒ½æ­£å¸¸

```vue
<template>
  <div id="app">
    <img alt="Vue logo" src="./assets/logo.png">
    <demo></demo>
    <Card 
      imgSrc="123456.png"
      summary="è¿™æ˜¯ä¸€ä¸ªcardç»„ä»¶"
      width='570'
      imgHeight="130"
    >
     123
      <template v-slot:footer>
        footer
      </template>
  </Card>
  </div>
</template>
```

### æ‰“åŒ…

åœ¨å†™ç»„ä»¶çš„æ–‡ä»¶å¤¹ åŒçº§ç›®å½•åˆ›å»ºindex.jsæ–‡ä»¶ï¼Œç”¨äºæ±‡æ€»å¯¼å‡ºæ‰€æœ‰ç»„ä»¶ï¼Œä¾¿äºæ‰“åŒ…åå¼•ç”¨

```js
import Demo from './demo'
import Card from "./card"

const components = {
    Demo,
    Card
}

const install = function(Vue) {
    if (install.installed) return;
    Object.keys(components).forEach(key => {
        Vue.component(components[key].name, components[key])
    })
}

export default {
    install,
    Card,
    Demo
}
```

cssä¹Ÿæ˜¯åŒçº§åˆ›å»ºindex.cssï¼Œå¼•å…¥å…¶ä»–çš„cssæ–‡ä»¶ï¼Œä¾¿äºæ‰“åŒ…åå¼•ç”¨

```
@import url('./demo.scss');
@import url('./card.scss');
```

åˆ›å»ºæ‰“åŒ…å‘½ä»¤è¡Œï¼Œå¹¶æ‰§è¡Œ

webpackæ‰“åŒ…jsä¸ºumdæ¨¡å—

```
"scripts": {        
        "serve": "vue-cli-service serve",
        "build": "vue-cli-service build",
        "lint": "vue-cli-service lint",
        "build:lib": "vue-cli-service build --target lib --name dfk --dest lib packages/lib/index.js",
        "build:css": "npx gulp sass"
    },
```

```
è¿è¡Œ  npm run build:lib æ‰“åŒ…jsä»£ç ï¼Œæ³¨æ„æ–‡ä»¶è·¯å¾„æŠ¥é”™
```



åˆ›å»ºgulpfile.jsæ–‡ä»¶ï¼Œç”¨äºæ‰“åŒ…cssæ–‡ä»¶ï¼Œä½¿ç”¨çš„scssï¼ˆä¸‹è½½ä¸‹æ–¹éœ€è¦çš„4ä¸ªä¾èµ–ï¼Œæ³¨æ„è‡ªå·±çš„æ–‡ä»¶è·¯å¾„ï¼‰

```
const gulp = require('gulp');
// const sass = require('gulp-sass');
const sass = require('gulp-sass')(require('sass'));
const minifyCSS = require('gulp-minify-css');

gulp.task('sass', async function() {
    return gulp.src('packages/**/*.scss')
        .pipe(sass())
        .pipe(minifyCSS())
        .pipe(gulp.dest('lib/css'))
})
```

è¿è¡Œ  npm run build:css æ‰“åŒ…cssä»£ç ï¼Œæ³¨æ„æ–‡ä»¶è·¯å¾„æŠ¥é”™

### å‘å¸ƒ

[å›¾æ–‡ç»“åˆç®€å•æ˜“å­¦çš„ npm åŒ…çš„å‘å¸ƒæµç¨‹ (qq.com)](https://mp.weixin.qq.com/s/clyH5SFvwtPY19dagUgcDA)

1ã€å‡†å¤‡ä¸€ä¸ªnpmè´¦å·

2ã€npm login  ç™»å½•npmè´¦å·

3ã€npm publish (æ¨é€ä»£ç ï¼Œæ³¨æ„ä¿®æ”¹package.jsonçš„é…ç½®)

```
    "name": "fankoui3",
    "version": "0.1.0",
    "description": "npmæµ‹è¯•",            //æè¿°
    "main": "lib/dfk.umd.js",           //æ‰“åŒ…æ–‡ä»¶å…¥å£
    "keywords": [                       //å…³é”®å­—
        "f-ui",
        "vue",
        "ui"
    ],
    "author": "fanko",   //ä½œè€…
    "files": [          //è¦æ‰“åŒ…çš„æ–‡ä»¶è·¯å¾„
        "lib",
        "packages"
    ],
    "scripts": {        
        "serve": "vue-cli-service serve",
        "build": "vue-cli-service build",
        "lint": "vue-cli-service lint",
        "build:lib": "vue-cli-service build --target lib --name dfk --dest lib packages/lib/index.js",
        "build:css": "npx gulp sass"
    },
```

å‘å¸ƒæˆåŠŸåä»npmç½‘ç«™è´¦å·å†…å¯çœ‹åˆ°

### æµ‹è¯•

åˆ›å»ºä¸€ä¸ªvueé¡¹ç›®

ä¸‹è½½ fankoui3 ä¾èµ–

main.js (å¼•å…¥ä¾èµ–å’Œcssæ ·å¼å¹¶ä½¿ç”¨)

```
import Vue from 'vue'
import App from './App.vue'

import "fankoui3/lib/css/css/index.css"
import fankoui3 from "fankoui3"
Vue.config.productionTip = false

Vue.use(fankoui3)
new Vue({
    render: h => h(App),
}).$mount('#app')
```

åœ¨vueæ–‡ä»¶ä¸­ä½¿ç”¨Cardç»„ä»¶ï¼Œå¦‚å¯æ˜¾ç¤ºæ­£å¸¸ï¼Œåˆ™ç»„ä»¶åº“åˆ›å»ºæˆåŠŸã€‚

### å¦‚ä½•å†™ä¸€ä¸ªå±äºè‡ªå·±çš„Vue3ç»„ä»¶åº“

 [å¦‚ä½•å†™ä¸€ä¸ªå±äºè‡ªå·±çš„Vue3ç»„ä»¶åº“ (qq.com)](https://mp.weixin.qq.com/s/jvLAFzwJPlA5J-iNJSblag) 

[ã€å‰ç«¯å·¥ç¨‹åŒ–-ç»„ä»¶åº“ã€‘ä»0-1æ„å»ºVue3ç»„ä»¶åº“ï¼ˆæ‰“åŒ…å‘å¸ƒï¼‰ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7255514764754894907?searchId=20231030164149D848293E31B857FECA86#heading-6)

[å‰ç«¯å·¥ç¨‹åŒ–ğŸ˜¼å¼€æºé¡¹ç›®éƒ½åœ¨ç”¨çš„ã€Monorepoã€‘ğŸ‹ğŸ¿ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7285373518836826167)

## vue3åŸºæœ¬ä½¿ç”¨ï¼ˆç”¨setup è¯­æ³•ç³–ï¼‰

https://cn.vuejs.org/guide/introduction.html

### è®¡ç®—å±æ€§

```js
import { ref,reactive, computed } from 'vue'

const author = reactive({
  name: 'John Doe',
  books: [
    'Vue 2 - Advanced Guide',
    'Vue 3 - Basic Guide',
    'Vue 4 - The Mystery'
  ]
})

// ä¸€ä¸ªè®¡ç®—å±æ€§ refï¼Œéšåè®¿é—®publishedBooksMessageçš„å€¼è¦ç”¨ publishedBooksMessage.value
const publishedBooksMessage = computed(() => {
  return author.books.length 
})


// è®¡ç®—å±æ€§é»˜è®¤æ˜¯åªè¯»çš„ã€‚å½“ä½ å°è¯•ä¿®æ”¹ä¸€ä¸ªè®¡ç®—å±æ€§æ—¶ï¼Œä½ ä¼šæ”¶åˆ°ä¸€ä¸ªè¿è¡Œæ—¶è­¦å‘Šã€‚åªåœ¨æŸäº›ç‰¹æ®Šåœºæ™¯ä¸­ä½ å¯èƒ½æ‰éœ€è¦ç”¨  åˆ°â€œå¯å†™â€çš„å±æ€§ï¼Œä½ å¯ä»¥é€šè¿‡åŒæ—¶æä¾› getter å’Œ setter æ¥åˆ›å»º
const firstName = ref('John')
const lastName = ref('Doe')

const fullName = computed({
  // getter
  get() {
    return firstName.value + ' ' + lastName.value
  },
  // setter
  set(newValue) {
    // æ³¨æ„ï¼šæˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„æ˜¯è§£æ„èµ‹å€¼è¯­æ³•
    [firstName.value, lastName.value] = newValue.split(' ')
  }
})
```

### watch

```js
const x = ref(0)
const y = ref(0)

// å•ä¸ª ref
watch(x, (newX) => {
  console.log(`x is ${newX}`)
})

// getter å‡½æ•°
watch(
  () => x.value + y.value,
  (sum) => {
    console.log(`sum of x + y is: ${sum}`)
  }
)

// å¤šä¸ªæ¥æºç»„æˆçš„æ•°ç»„
watch([x, () => y.value], ([newX, newY]) => {
  console.log(`x is ${newX} and y is ${newY}`)
})


//ä¸èƒ½ç›´æ¥ä¾¦å¬å“åº”å¼å¯¹è±¡çš„å±æ€§å€¼,è¿™é‡Œéœ€è¦ç”¨ä¸€ä¸ªè¿”å›è¯¥å±æ€§çš„ getter å‡½æ•°
// æä¾›ä¸€ä¸ª getter å‡½æ•°
watch(
  () => obj.count,
  (count) => {
    console.log(`count is: ${count}`)
  },
  //  { deep: true }  æ·±åº¦ç›‘å¬
  //  { immediate: true }   //ç«‹å³æ‰§è¡Œ
) 
```

### `watchEffect()`

 ä¾¦å¬å™¨çš„å›è°ƒä½¿ç”¨ä¸æºå®Œå…¨ç›¸åŒçš„å“åº”å¼çŠ¶æ€æ˜¯å¾ˆå¸¸è§çš„ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼Œåœ¨æ¯å½“ `todoId` çš„å¼•ç”¨å‘ç”Ÿå˜åŒ–æ—¶ä½¿ç”¨ä¾¦å¬å™¨æ¥åŠ è½½ä¸€ä¸ªè¿œç¨‹èµ„æº 

```
const todoId = ref(1)
const data = ref(null)

watch(todoId, async () => {
  const response = await fetch(
    `https://jsonplaceholder.typicode.com/todos/${todoId.value}`
  )
  data.value = await response.json()
}, { immediate: true })
```

 ç‰¹åˆ«æ˜¯æ³¨æ„ä¾¦å¬å™¨æ˜¯å¦‚ä½•ä¸¤æ¬¡ä½¿ç”¨ `todoId` çš„ï¼Œä¸€æ¬¡æ˜¯ä½œä¸ºæºï¼Œå¦ä¸€æ¬¡æ˜¯åœ¨å›è°ƒä¸­ã€‚ 

 ç”¨ [`watchEffect` å‡½æ•°](https://cn.vuejs.org/api/reactivity-core.html#watcheffect) æ¥ç®€åŒ–ä¸Šé¢çš„ä»£ç ã€‚`watchEffect()` å…è®¸æˆ‘ä»¬è‡ªåŠ¨è·Ÿè¸ªå›è°ƒçš„å“åº”å¼ä¾èµ– 

```
watchEffect(async () => {
  const response = await fetch(
    `https://jsonplaceholder.typicode.com/todos/${todoId.value}`
  )
  data.value = await response.json()
})
```

åœæ­¢ä¾¦å¬å™¨

```
// å®ƒä¼šè‡ªåŠ¨åœæ­¢
watchEffect(() => {})


// æ‰‹åŠ¨åœæ­¢
const unwatch = watchEffect(() => {})
// ...å½“è¯¥ä¾¦å¬å™¨ä¸å†éœ€è¦æ—¶
unwatch()
```



### ç”Ÿå‘½å‘¨æœŸä½¿ç”¨

```
<script setup>
import { onMounted } from 'vue'

onMounted(() => {
  console.log(`the component is now mounted.`)
})
</script>
```



### props  

```vue

<script setup>
    //  definePropsé‡Œé¢å£°åpropsä¼šæœ‰å“ªäº›å€¼ï¼Œä¾‹å¦‚çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶ä¸€ä¸ª'num'å€¼
    const props = defineProps(['num'])
    // åœ¨scripté‡Œä½¿ç”¨propsçš„å€¼è¦å¸¦'props.'',åœ¨templateä¸­ç›´æ¥ {{num}} å°±å¯ä»¥è·å–
    console.log(props.num)
</script>

// å¯¹è±¡å¼å£°æ˜propsï¼Œåªæ˜¯å†™æ³•ä¸åŒ
defineProps({
  title: String,
  likes: Number
})
```

### emit

```
// çˆ¶ç»„ä»¶ app.vue
<template>
	<son @sonClick="getSon" @sonClick2="getSon2(num)"></son>
</template>
<script setup>
    const getSon=()=>{}
    const getSon2=(num)=>{}
</script>

//å­ç»„ä»¶  son.vue

 //  defineEmitsé‡Œé¢å£°å è‡ªå®šä¹‰äº‹ä»¶  
const emit = defineEmits(['sonClick','sonClick2'])
// emitè§¦å‘äº‹ä»¶ï¼Œå¯æºå¸¦å‚æ•°
emit('sonClick')
emit('sonClick2','123')

```

### çˆ¶ç»„ä»¶é€šè¿‡refè°ƒç”¨å­ç»„ä»¶

```vue
çˆ¶ç»„ä»¶  app.vue
<chuanzhi ref="myson" ></chuanzhi>
<button @click="mySonRef">{{myson}}</button>

<script setup>
//  å®šä¹‰ä¸€ä¸ªå’Œå­ç»„ä»¶åŒåçš„refå˜é‡
let myson=ref()
const mySonRef=()=>{
  // é€šè¿‡myson.valueè·å–å­ç»„ä»¶çš„å±æ€§ï¼Œä½†åªæœ‰å­ç»„ä»¶æš´éœ²å‡ºæ¥çš„æ‰èƒ½è®¿é—®
  console.log('myson',myson.value)
  myson.value.ceshi()
}
</script>

å­ç»„ä»¶  chuanzhi.vue
<script setup>
let sons=ref('123')
const ceshi=()=>{
    console.log('123')
}
// å­ç»„ä»¶é€šè¿‡defineExposeå‘å¤–æš´éœ²å±æ€§å’Œæ–¹æ³•ï¼Œçˆ¶ç»„ä»¶æ‰èƒ½è®¿é—®
defineExpose({
  sons,ceshi
})
</script>
</script>


```

### nextTick

 è‹¥è¦ç­‰å¾…ä¸€ä¸ªçŠ¶æ€æ”¹å˜åçš„ DOM æ›´æ–°å®Œæˆ ,å¯ä»¥ä½¿ç”¨nextTick

```
import { nextTick } from 'vue'

nextTick(() => {
    // è®¿é—®æ›´æ–°åçš„ DOM
  })
```

### ä¾èµ–æ³¨å…¥(provide,inject  )

ä¾èµ–æä¾›æ–¹ï¼šprovide

```
<script setup>
import { provide } from 'vue'

provide(/* æ³¨å…¥å */ 'message', /* å€¼ */ 'hello!')

// ç¬¬äºŒä¸ªå‚æ•°æ˜¯æä¾›çš„å€¼ï¼Œå€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ŒåŒ…æ‹¬å“åº”å¼çš„çŠ¶æ€ï¼Œæ¯”å¦‚ä¸€ä¸ª ref
const count = ref('0')
provide('message', count.value)
</script>
```

æ³¨å…¥ï¼šinject  æ¥æ”¶ä¾èµ–

```
<script setup>
import { inject } from 'vue'

const message = inject('message')

// å¦‚æœæ²¡æœ‰ç¥–å…ˆç»„ä»¶æä¾› "message"ï¼Œ `value` ä¼šæ˜¯ "è¿™æ˜¯é»˜è®¤å€¼"
const value = inject('message', 'è¿™æ˜¯é»˜è®¤å€¼')

</script>
```



### vue3 hooks



#### é¼ æ ‡è·Ÿè¸ªå™¨ç¤ºä¾‹

```js
// mouse.jsï¼ˆhook å®Œæ•´ç¤ºä¾‹ï¼‰
import { ref, onMounted, onUnmounted } from 'vue'

// æŒ‰ç…§æƒ¯ä¾‹ï¼Œç»„åˆå¼å‡½æ•°åä»¥â€œuseâ€å¼€å¤´
export function useMouse() {
  // è¢«ç»„åˆå¼å‡½æ•°å°è£…å’Œç®¡ç†çš„çŠ¶æ€
  const x = ref(0)
  const y = ref(0)

  // ç»„åˆå¼å‡½æ•°å¯ä»¥éšæ—¶æ›´æ”¹å…¶çŠ¶æ€ã€‚
  function update(event) {
    x.value = event.pageX
    y.value = event.pageY
  }

  // ä¸€ä¸ªç»„åˆå¼å‡½æ•°ä¹Ÿå¯ä»¥æŒ‚é åœ¨æ‰€å±ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸Š
  // æ¥å¯åŠ¨å’Œå¸è½½å‰¯ä½œç”¨
  onMounted(() => window.addEventListener('mousemove', update))
  onUnmounted(() => window.removeEventListener('mousemove', update))

  // é€šè¿‡è¿”å›å€¼æš´éœ²æ‰€ç®¡ç†çš„çŠ¶æ€
  return { x, y }
}
```

 

ï¼ˆå†æ‹†åˆ†ï¼‰æˆ‘ä»¬å¯ä»¥å°†æ·»åŠ å’Œæ¸…é™¤ DOM äº‹ä»¶ç›‘å¬å™¨çš„é€»è¾‘ä¹Ÿå°è£…è¿›ä¸€ä¸ªç»„åˆå¼å‡½æ•°ä¸­ï¼š 

```js
// event.js
import { onMounted, onUnmounted } from 'vue'

export function useEventListener(target, event, callback) {
  // å¦‚æœä½ æƒ³çš„è¯ï¼Œ
  // ä¹Ÿå¯ä»¥ç”¨å­—ç¬¦ä¸²å½¢å¼çš„ CSS é€‰æ‹©å™¨æ¥å¯»æ‰¾ç›®æ ‡ DOM å…ƒç´ 
  onMounted(() => target.addEventListener(event, callback))
  onUnmounted(() => target.removeEventListener(event, callback))
}
```

 æœ‰äº†å®ƒï¼Œä¹‹å‰çš„ `useMouse()` ç»„åˆå¼å‡½æ•°å¯ä»¥è¢«ç®€åŒ–ä¸ºï¼š 

```js
// mouse.js
import { ref } from 'vue'
import { useEventListener } from './event'

export function useMouse() {
  const x = ref(0)
  const y = ref(0)

  useEventListener(window, 'mousemove', (event) => {
    x.value = event.pageX
    y.value = event.pageY
  })

  return { x, y }
}
```



ç»„ä»¶ä¸­ä½¿ç”¨

```vue
<script setup>
import { useMouse } from './mouse.js'

const { x, y } = useMouse()
</script>

<template>Mouse position is at: {{ x }}, {{ y }}</template>
```



#### å¼‚æ­¥çŠ¶æ€ç¤ºä¾‹

 åœ¨åšå¼‚æ­¥æ•°æ®è¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å¤„ç†ä¸åŒçš„çŠ¶æ€ï¼šåŠ è½½ä¸­ã€åŠ è½½æˆåŠŸå’ŒåŠ è½½å¤±è´¥ã€‚ 

**æ¥æ”¶å“åº”å¼çŠ¶æ€**

 `useFetch()` æ¥æ”¶ä¸€ä¸ªé™æ€ URL å­—ç¬¦ä¸²ä½œä¸ºè¾“å…¥â€”â€”å› æ­¤å®ƒåªä¼šæ‰§è¡Œä¸€æ¬¡ fetch å¹¶ä¸”å°±æ­¤ç»“æŸã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨ URL æ”¹å˜æ—¶é‡æ–° fetch å‘¢ï¼Ÿä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å°†å“åº”å¼çŠ¶æ€ä¼ å…¥ç»„åˆå¼å‡½æ•°ï¼Œå¹¶è®©å®ƒåŸºäºä¼ å…¥çš„çŠ¶æ€æ¥åˆ›å»ºæ‰§è¡Œæ“ä½œçš„ä¾¦å¬å™¨ã€‚ 

ä¸¾ä¾‹æ¥è¯´ï¼Œ`useFetch()` åº”è¯¥èƒ½å¤Ÿæ¥æ”¶ä¸€ä¸ª refï¼šæˆ–è€…æ¥æ”¶ä¸€ä¸ª getter å‡½æ•°ï¼š

æˆ‘ä»¬å¯ä»¥ç”¨ [`watchEffect()`](https://cn.vuejs.org/api/reactivity-core.html#watcheffect) å’Œ [`toValue()`](https://cn.vuejs.org/api/reactivity-utilities.html#tovalue) API æ¥é‡æ„æˆ‘ä»¬ç°æœ‰çš„å®ç°ï¼š



`toValue()` æ˜¯ä¸€ä¸ªåœ¨ 3.3 ç‰ˆæœ¬ä¸­æ–°å¢çš„ APIã€‚å®ƒçš„è®¾è®¡ç›®çš„æ˜¯å°† ref æˆ– getter è§„èŒƒåŒ–ä¸ºå€¼ã€‚å¦‚æœå‚æ•°æ˜¯ refï¼Œå®ƒä¼šè¿”å› ref çš„å€¼ï¼›å¦‚æœå‚æ•°æ˜¯å‡½æ•°ï¼Œå®ƒä¼šè°ƒç”¨å‡½æ•°å¹¶è¿”å›å…¶è¿”å›å€¼ã€‚å¦åˆ™ï¼Œå®ƒä¼šåŸæ ·è¿”å›å‚æ•°ã€‚å®ƒçš„å·¥ä½œæ–¹å¼ç±»ä¼¼äº [`unref()`](https://cn.vuejs.org/api/reactivity-utilities.html#unref)ï¼Œä½†å¯¹å‡½æ•°æœ‰ç‰¹æ®Šå¤„ç†ã€‚

æ³¨æ„ `toValue(url)` æ˜¯åœ¨ `watchEffect` å›è°ƒå‡½æ•°çš„**å†…éƒ¨**è°ƒç”¨çš„ã€‚è¿™ç¡®ä¿äº†åœ¨ `toValue()` è§„èŒƒåŒ–æœŸé—´è®¿é—®çš„ä»»ä½•å“åº”å¼ä¾èµ–é¡¹éƒ½ä¼šè¢«ä¾¦å¬å™¨è·Ÿè¸ªã€‚

è¿™ä¸ªç‰ˆæœ¬çš„ `useFetch()` ç°åœ¨èƒ½æ¥æ”¶é™æ€ URL å­—ç¬¦ä¸²ã€ref å’Œ getterï¼Œä½¿å…¶æ›´åŠ çµæ´»ã€‚watch effect ä¼šç«‹å³è¿è¡Œï¼Œå¹¶ä¸”ä¼šè·Ÿè¸ª `toValue(url)` æœŸé—´è®¿é—®çš„ä»»ä½•ä¾èµ–é¡¹ã€‚å¦‚æœæ²¡æœ‰è·Ÿè¸ªåˆ°ä¾èµ–é¡¹ï¼ˆä¾‹å¦‚ url å·²ç»æ˜¯å­—ç¬¦ä¸²ï¼‰ï¼Œåˆ™ effect åªä¼šè¿è¡Œä¸€æ¬¡ï¼›å¦åˆ™ï¼Œå®ƒå°†åœ¨è·Ÿè¸ªåˆ°çš„ä»»ä½•ä¾èµ–é¡¹æ›´æ”¹æ—¶é‡æ–°è¿è¡Œã€‚



**è¾“å…¥å‚æ•°**

å³ä¾¿ä¸ä¾èµ–äº ref æˆ– getter çš„å“åº”æ€§ï¼Œç»„åˆå¼å‡½æ•°ä¹Ÿå¯ä»¥æ¥æ”¶å®ƒä»¬ä½œä¸ºå‚æ•°ã€‚å¦‚æœä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªå¯èƒ½è¢«å…¶ä»–å¼€å‘è€…ä½¿ç”¨çš„ç»„åˆå¼å‡½æ•°ï¼Œæœ€å¥½å¤„ç†ä¸€ä¸‹è¾“å…¥å‚æ•°æ˜¯ ref æˆ– getter è€ŒéåŸå§‹å€¼çš„æƒ…å†µã€‚å¯ä»¥åˆ©ç”¨ [`toValue()`](https://cn.vuejs.org/api/reactivity-utilities.html#tovalue) å·¥å…·å‡½æ•°æ¥å®ç°ï¼š

```
import { toValue } from 'vue'

function useFeature(maybeRefOrGetter) {
  // å¦‚æœ maybeRefOrGetter æ˜¯ä¸€ä¸ª ref æˆ– getterï¼Œ
  // å°†è¿”å›å®ƒçš„è§„èŒƒåŒ–å€¼ã€‚
  // å¦åˆ™åŸæ ·è¿”å›ã€‚
  const value = toValue(maybeRefOrGetter)
}
```



useFetchï¼ˆï¼‰å®ç°ä»£ç ç¤ºä¾‹ï¼š

[ç¤ºä¾‹åœ°å€](https://play.vuejs.org/#eNp9VNtu4zgM/RWuX+JiM3YXxb4USbC3LrCLuaFzefKLYtONWkcyJCppEOTfh5RsN5kpBmiRhCIPzzmkdMz+7PtiFzC7zRa+dron8EihX1VGb3vrCI7gsJ1Dbbd9IGzgBK2zW5hx0ewsKXj8F6neTOdFOYaKR8+Zlamt8QRr5fGL62AJsw1R72/L8tFb03eqxo3tGnQFHXpd2wYLblqSbawvGSCV64YrmVE++212NQZDxBsp5vkVLFdTo1+5ptipLiDnjxVHaBSpOaBz1s0ZkNyBqS8nHTljcv6iTK6wH/yDcMs8CfkXwFurGuht5HQrgcU6EFkDuzetdcsq06AN/F5l8Efd6fpJIkJeV9nqeAQNp9OiTCURvaJFo3dcrVtOjcQ4U4AZul99sL3/Be4kDMgqgiF02NwCY8XkYoveqweMuDLAWDhwmihEpYx7L59n/Tm15PbpW+KBncdERrzimn/4AzqWLW0XvUPRIWepJf9+FWMlTmnzUBTFeL4oJyuzeXa2KLyHl3u3V3xw17ZY0xzIfpU5freDlcHnWNIGU5NmtRdDhKPwSWOPZNP+mNDJgMeTaOH3R/J/RiBX/mBqSOsVUQHKkkv4yoAnVgNr5NkjtNI9Sk5Z0jftILcQ+BROc/sxfg5tux0CbTAueUoVFhtnjQ2+O4C3oGnmgZyqn/iCKg9qAmiwR9PwvhxgfbjQEgWO6hk7ObscPR72/4WNXJBBc0RWjnSra606btKpAzBbZRoeS1pdsY8A1F5pAtJbtGFoKmEGCEa8voK97jq5gMGZqJOjg07dJmVKYnJBhtaW09xe++RLyo0oa6kWoGjDG+0HAZRUspssMDGKExKRUa28DBH9YlApk6t4Ma0ZHTtBLTZCjsNq/ThJHDLl4xRfHRgVXjw8ksF/lXnFz8pM6zy5l/oNSAb38JGvAfuQ58OiyEv2yNM931Bezs8DwMXmgvibv1O0KdLg+HQF18XNmSxpFoFH8SJf7vRlirTMhU98nvLZfVqE+Gt29VI62DKHm+vrGBVzTvwCkOcJtfohGs1vQESvMnnRdYfuQy8++Crj124Yaaa6zu7/jzFyAedjvN5g/fRK/NE/S6zKPsp9dTussumMlHtASsd3n97jM3+fDre2CR1n/+TwXkwKwjGl/RVMw7TP8iLb/+LLxs/CZ3/3TGj8KEqIRjtifpXxu/b3T6S/0L0pbmKduHj6BqMzlM8=)

```js
import { ref, watchEffect, toValue } from 'vue'

export function useFetch(url) {
  const data = ref(null)
  const error = ref(null)
  
  watchEffect(async () => {
    // reset state before fetching..
    data.value = null
    error.value = null
    
    // resolve the url value synchronously so it's tracked as a
    // dependency by watchEffect()
    const urlValue = toValue(url)
    
    try {
      // artificial delay / random error
  	  await timeout()
  	  // unref() will return the ref value if it's a ref
	    // otherwise the value will be returned as-is
    	const res = await fetch(urlValue)
	    data.value = await res.json()
    } catch (e) {
      error.value = e
    }
  })

  return { data, error }
}

// artificial delay
function timeout() {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      if (Math.random() > 0.3) {
        resolve()
      } else {
        reject(new Error('Random Error'))
      }
    }, 300)
  })
}
```

ä½¿ç”¨

```vue
<script setup>
import { ref, computed } from 'vue'
import { useFetch } from './useFetch.js'

const baseUrl = 'https://jsonplaceholder.typicode.com/todos/'
const id = ref('1')
const url = computed(() => baseUrl + id.value)

const { data, error, retry } = useFetch(url)
</script>

<template>
  Load post id:
  <button v-for="i in 5" @click="id = i">{{ i }}</button>

	<div v-if="error">
    <p>Oops! Error encountered: {{ error.message }}</p>
    <button @click="retry">Retry</button>
  </div>
  <div v-else-if="data">Data loaded: <pre>{{ data }}</pre></div>
  <div v-else>Loading...</div>
</template>
```



## å¦‚ä½•åœ¨Vue.jsä¸­åˆ›å»ºæ¨¡æ€æ¡†(å¼¹å‡ºæ¡†)

 [å¦‚ä½•åœ¨Vue.jsä¸­åˆ›å»ºæ¨¡æ€æ¡†(å¼¹å‡ºæ¡†) (qq.com)](https://mp.weixin.qq.com/s/MddofJ10zYXtWAeGa5Z_Cw) 

## ç‚¹å‡»ä¾§è¾¹å±•ç¤ºå¯¼èˆªçš„ç»„ä»¶  

ç”¨çš„ant-design-vueçš„ a-drawer

```vue
<template>
  <div class="the-dot">
    <div @click="showBannel" class="go-back"><a-icon type="menu-fold" /></div>
    <a-drawer
      class="drawer"
      title="å¯¼èˆªèœå•"
      :placement="placement"
      :closable="false"
      :visible="visible"
      @close="onClose"
    >
      <div class="company-tab">
        <div v-for="(item,index) in pathList" :key="index" class="tab" :class="path==item.path?'active':''" @click="goThePath(item)"><a-icon type="appstore" class="icon"/>{{ item.name }}</div>
      </div>
    </a-drawer>
  </div>
</template>

  <script>
  export default {
    data () {
      return {
          placement: 'left',
          visible: false,
          style: 'border-color: #167cf3;color: #167cf3;',
          path: '',
          pathList: [
            {
                name: '1',
                path: '/index'
            },
            {
                name: '2',
                path: '/job/tallSchool',
                type: 11
            }, {
                name: '3',
                path: '/needCenter',
                type: 8
            }
          ]
      }
    },
    methods: {
        goThePath (item) {
            this.path = item.path
            this.$router.push({
                path: item.path,
                query: { type: item.type }
            })
            this.showBannel()
        },
      goBack () {
          this.$router.go(-1)
      },
      showBannel () {
          this.visible = !this.visible
      },
      onClose () {
          this.visible = false
      }
    },
    created () {

    },
    mounted () {
      this.path = this.$route.path
    }
  }
  </script>
  <style scoped >
  @media screen and (max-width: 600px) {
    .the-dot{
        display: block;
    }
  }
  @media screen and (min-width: 600px) {
    .the-dot{
        display: none;
    }
}
   .go-back{
      position: fixed;
      background-color: #FFF;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      box-shadow: 0 0 6px rgb(0 0 0 / 12%);
      cursor: pointer;
      z-index: 1000000000;
      top:10px;
      right:10px
   }

  .company-tab {
          margin: 0 auto;
          background:#001529;
          padding-left: 0;

        }
  .tab{
      display: flex;
      align-items: center;
      padding-left:30px;
      margin:10px 0;
      color:white;
      background: #001529;
      width:100%;
      height:40px;
      margin-bottom: 2px;
      font-size: 14px;
      cursor: pointer;
  }
  .tab.active {
      background: #167cf3;
      /* background: rgba(0, 0, 0, 0.04); */
  }
  .icon{
      margin-right:10px
  }
  >>>.ant-drawer-body {
      padding:0
  }
  >>>.ant-drawer-wrapper-body {
      background:#001529;
  }
  >>>.ant-drawer-header {
     background:#001529;
     color:white;
     font-weight: 600;
  }
  >>>.ant-drawer-title {
      color:white
  }
  </style>

```



## vue3ä½¿ç”¨jsx

 [å¦‚ä½•åœ¨ vue3 ä¸­ä½¿ç”¨ jsx/tsx? - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7213356423810924581) 

 [åœ¨ vue3 ä¸­ä¼˜é›…çš„ä½¿ç”¨ jsx/tsx - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7151950058501373989?from=search-suggest) 

 [åœ¨Vue3ä¸­åˆ©ç”¨JSX+å‡½æ•°å¼ç»„ä»¶åšåˆ°æ›´å¥½çš„ä»£ç å¤ç”¨ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7261604498924961829) 

 [JSX è®¾ç½®æ ·å¼ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/375527289) 

[ä¸‡å­—é•¿æ–‡è¯¦è§£ Vue JSXï¼Œå¸¦ä½ å…¨é¢æ‹¥æŠ± JSX ç‰¹æ€§ï¼-è®²è¿°äº†jsxçš„ä¼˜ç‚¹ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7272308621710213161)

 æƒ³åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ JSX,æˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ªæ’ä»¶`@vitejs/plugin-vue-jsx`,è¿™ä¸ªæ’ä»¶å¯ä»¥è®©æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ JSX/TSX 

```
npm i @vitejs/plugin-vue-jsx -D
```

vite.config.js(å¼•å…¥jsc)

```js
import vueJsx from "@vitejs/plugin-vue-jsx";
// https://vitejs.dev/config/
export default defineConfig({
  plugins: [vue(), vueJsx()],
});
```

setupè¯­æ³•ç³–å†…åŸºæœ¬ä½¿ç”¨

```vue
<template>
  <div>
    jsx
    <jsxtests></jsxtests>
  </div>
</template>

<script setup  lang="tsx">
// å¼•å…¥å¤–éƒ¨æ ·å¼æ–‡ä»¶ï¼Œvueé‡Œé¢çš„styleæ ·å¼ä½¿ç”¨æ˜¯ä¸ç”Ÿæ•ˆçš„
import styles from './jsx.module.css'
const msg=' i am msg'
const classNams={
    color:'blue'
}
const list=['1','2','3']
const jsxtests=()=>{
    return (
    <div>
        <div style={{color:'red',"font-weight":'bold'}}>{msg}</div>
        <div style={classNams}>12332432</div>
        {/* è¿™é‡Œçš„classä½¿ç”¨çš„æ˜¯å¤–éƒ¨æ ·å¼æ–‡ä»¶é‡Œå®šä¹‰çš„ç±»å,å¤šä¸ªç±»åå¯ä»¥ç”¨æ•°ç»„ */}
        <div class={styles.asc}>12334</div>
        <div>
            {
               list.map((item,index)=>{
                    return <div key="index">{item}</div>
                })  
            }
           
        </div>
    </div>
    )
}
</script>
```

jsx.module.css

(æ¨¡å—css,éš”ç»æ ·å¼çš„æ±¡æŸ“ï¼Œç›¸å½“äºstyleæ ‡ç­¾é‡Œé¢çš„scopedï¼‰

```
.asc{
    color:aqua
}
```

 CSS Modules å¼•å…¥å±€éƒ¨æ ·å¼ï¼Œç›¸å½“äº vue ç»„ä»¶ä¸­ `` æ ‡ç­¾çš„ scoped å±æ€§ã€‚ 

```
import styles from './jsx.module.css'
 <div class={styles.asc}>12334</div>
```

## vueä½¿ç”¨Tailwindcss

å®˜æ–¹æ–‡æ¡£ï¼š [Width - TailwindCSSä¸­æ–‡æ–‡æ¡£ | TailwindCSSä¸­æ–‡ç½‘](https://www.tailwindcss.cn/docs/width) 

å½“æœ‰ä¸çŸ¥é“çš„ç±»å¯ä»¥ç›´æ¥åˆ°å®˜ç½‘æ–‡æ¡£æŸ¥çœ‹

 [åœ¨vite-vue3ä¸­å¿«é€Ÿä½¿ç”¨Tailwindcss - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7228488937505030199) 

 [Vueä¸­ä½¿ç”¨ Tailwind CSS - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7216990794942201913#heading-5) 

å®‰è£…ä¾èµ–

```
npm i -D tailwindcss postcss autoprefixer
```

åˆ›å»ºé…ç½®æ–‡ä»¶

```
npx tailwindcss init
```

å¼•å…¥æ ·å¼

```
// main.js
import "tailwindcss/tailwind.css"
```

é…ç½®tailwind.config.jsæ–‡ä»¶

```
content: ['./index.html', './src/**/*.{vue,js,ts,jsx,tsx}']
```

vite.config.jså¢åŠ é…ç½®(è‹¥ä¸ç”Ÿæ•ˆï¼Œåˆ™ä½¿ç”¨ä¸‹ä¸€ä¸ªæ–¹å¼)

```
css: {
    postcss: {
        plugins: [require('tailwindcss'), require('autoprefixer')],
    },
},
```

è‹¥vite.config.jså¢åŠ é…ç½®ï¼Œtailwindcsså¹¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œåˆ™ä½¿ç”¨ä»¥ä¸‹çš„é…ç½®

æ–°å»ºpostcss.config.js,è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼ŒæŸ¥çœ‹æ ·å¼ç”Ÿæ•ˆã€‚

```
export default {
    plugins: {
      tailwindcss: {},
      autoprefixer: {},
    },
}  
```

ä½¿ç”¨ç¤ºä¾‹ï¼š

```
 <div class="bg-green-600 w-20 h-12 font-semibold">12345</div>
```

**vue3 åŒæ—¶ä½¿ç”¨ element plus å’Œ Tailwindcss å¯èƒ½ä¼šå‡ºç°æ ·å¼å†²çªï¼ˆä¾‹å¦‚el-buttonæ˜¾ç¤ºå¼‚å¸¸ï¼‰ï¼Œæ­¤æ—¶ä¸€ç§è§£å†³æ–¹æ³•æ˜¯å…ˆå¼•å…¥ Tailwindcss ï¼Œç„¶åå†å¼•å…¥ element plus çš„æ ·å¼æ–‡ä»¶**



vscode  å®‰è£… Tailwind CSS IntelliSense æ’ä»¶ ,æ²¡æœ‰æç¤ºåŠŸèƒ½ï¼Œé€šè¿‡å¦‚ä¸‹è§£å†³ï¼š

1 vscodeç‚¹å‡»è®¾ç½®

2  æœç´¢ `editor.quickSuggestions` 

3 strings æ”¹ä¸º on



## vueUse

[èµ·æ­¥ | VueUseä¸­æ–‡æ–‡æ¡£ (vueusejs.com)](https://www.vueusejs.com/guide/)

```
npm i @vueuse/core
```

åœ¨ä½¿ç”¨çš„é¡µé¢å¼•å…¥éœ€è¦çš„é’©å­å°±è¡Œ(å…·ä½“é’©å­æŸ¥çœ‹å®˜ç½‘)

index.vue

```vue
<template>
	<div>
	  <div>vueUse:useMouse:   x{{ x }}  y{{ y }}  </div>
	<div>
</template>

<script setup>
	import {  useMouse  } from '@vueuse/core'
    const { x, y, sourceType } = useMouse()
</script>
```

